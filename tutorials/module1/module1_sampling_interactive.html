<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<meta name="progressive" content="true" />
<meta name="allow-skip" content="true" />
<meta name="learnr-version-prerender" content="0.11.5" />

<title>Activity 1: Sampling from a population</title>

<!-- header-includes START -->
<!-- HEAD_CONTENT -->
<!-- header-includes END -->
<!-- HEAD_CONTENT -->

<!-- highlightjs -->
<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>


<!-- taken from https://github.com/rstudio/rmarkdown/blob/de8a9c38618903627ca509f5401d50a0876079f7/inst/rmd/h/default.html#L293-L343 -->
<!-- tabsets -->
<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>
<!-- end tabsets -->


</head>

<body>
<a class='sr-only sr-only-focusable visually-hidden-focusable' href='#learnr-tutorial-content'>Skip to Tutorial Content</a>



<div class="pageContent band">
<main class="bandContent page">

<article class="topics" id="learnr-tutorial-content">

<div id="section-introduction" class="section level2">
<h2>Introduction</h2>
<p>Welcome to Module 1: <strong>Sampling from a population</strong>.</p>
<p>In this module, we’ll explore how to relate samples to populations,
calculate confidence intervals, and understand the impact of sample size
on study results. To introduce these statistical concepts, we’ll start
with a simple example focused on determining the prevalence of malaria.
This approach provides a gentle introduction to thinking about these
ideas in the context of study design. These same concepts are directly
applicable to malaria molecular surveillance (MMS) studies. For
instance, in MMS studies, we might design our research to estimate the
prevalence of molecular markers, such as drug resistance markers, rather
than the prevalence of malaria infection itself.</p>
<div id="section-learning-outcomes" class="section level3">
<h3>Learning Outcomes</h3>
<p>By the end of this tutorial, you will be able to:</p>
<ul>
<li>Define the target population for a study.</li>
<li>Differentiate between a population and a sample.</li>
<li>Calculate the 95% confidence interval.</li>
<li>Assess how sampling variability impacts the representation of the
population.</li>
<li>Understand the effect of sample size on confidence intervals.</li>
</ul>
</div>
</div>
<div id="section-what-is-my-population" class="section level2">
<h2>What is my population?</h2>
<p>In any study, clearly defining the <strong>target population</strong>
is crucial. Let’s consider a few examples of made-up studies.</p>
<div class="panel-heading tutorial-quiz-title">QUIZ - Target population</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz-study-pop-1" class="tutorial-question panel-body">
<div id="quiz-study-pop-1-answer_container" class="shiny-html-output"></div>
<div id="quiz-study-pop-1-message_container" class="shiny-html-output"></div>
<div id="quiz-study-pop-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
<div id="section-relating-the-sample-to-the-population"
class="section level2">
<h2>Relating the sample to the population</h2>
<p>Sampling the entire population is often impractical, whether due to
cost constraints or the challenges of reaching everyone. Fortunately, we
can design our study to ensure that the sample we collect is a
<strong>representative subset</strong> of the population.</p>
<p>When designing epidemiological studies, various data sources can
offer valuable insights into the population. Examples include
Demographic and Health Surveys (DHS) or population censuses, which
provide comprehensive information to help guide study design.</p>
<div id="section-using-the-population-census" class="section level3">
<h3>Using the population census</h3>
<p>Let’s go back to our made-up study.</p>
<p>We now have access to a census of the entire population of the
village (N= 10000) with information on each residents age and sex. For
purposes of this tutorial, there are 2678 people in the village with
malaria infections and we “know” the true infection status of every
individual. This will help us understand how our sample relates to the
entire population.</p>
<p>This is the information we have in the census (here we show the first
6 residents in the census):</p>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">age</th>
<th align="left">sex</th>
<th align="left">malaria_infection</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">27</td>
<td align="left">Male</td>
<td align="left">Not infected</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">79</td>
<td align="left">Female</td>
<td align="left">Not infected</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">21</td>
<td align="left">Female</td>
<td align="left">Infected</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">8</td>
<td align="left">Female</td>
<td align="left">Not infected</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">4</td>
<td align="left">Male</td>
<td align="left">Not infected</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">37</td>
<td align="left">Male</td>
<td align="left">Infected</td>
</tr>
</tbody>
</table>
</div>
<div id="section-population-demographics" class="section level3">
<h3>Population demographics</h3>
<p>Below we can see a breakdown of malaria-infected individuals in this
population.</p>
<p><img src="module1_sampling_interactive_files/figure-html/unnamed-chunk-3-1.png" width="624" /></p>
<p>Let’s look at the age and sex distribution.</p>
<p><img src="module1_sampling_interactive_files/figure-html/unnamed-chunk-4-1.png" width="624" /></p>
</div>
<div id="section-sampling-from-the-population" class="section level3">
<h3>Sampling from the population</h3>
<p>Suppose we have resources to determine the infection status of 200
individuals. Let’s randomly sample 200 individuals from the population
and see how they compare with the overall population. We can explore
demographic differences by plotting the age and sex distribution of the
sample compared with the population.</p>
<p>Below we use the function <code>sampleFromPopulation()</code> and we
specify what our sample size is and from where we want to sample (in our
case from the census data). We can use the
<code>plotAgeSexDistribution()</code> and
<code>plotInfectedProportion()</code> functions to visualize our
results. Click on “Run Code”.</p>
<div class="tutorial-exercise" data-label="sampling-1"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>sample &lt;- sampleFromPopulation(sample_size = 200, census)
comparison &lt;- compareSampleToPopulation(sample, census)

plotAgeSexDistribution(comparison)

plotInfectedProportion(comparison)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div
style="padding: 10px; border-radius: 5px; background-color: #fef3e7;">
<p><span style="font-size: 1.2em; color: #d19554;">
<i class="fas fa-comment"></i> Reflection: </span></p>
<p><span style="color:#d19554;"> Do we see a similar age and sex
distribution? What about the proportion of infected and not infected
individuals in the population? </span></p>
</div>
</div>
<div id="section-sampling-many-times-from-the-population"
class="section level3">
<h3>Sampling many times from the population</h3>
Now run this a few times with the sample size of 200 to see how it
changes with every random sample. Click “Start Over” and then “Run
code”.
<div class="tutorial-exercise" data-label="sampling-2"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>sample &lt;- sampleFromPopulation(sample_size = 200, census)
comparison &lt;- compareSampleToPopulation(sample, census)

plotAgeSexDistribution(comparison)
plotInfectedProportion(comparison)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="panel-heading tutorial-quiz-title">QUIZ - Sampling from the population</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz-sampling-1" class="tutorial-question panel-body">
<div id="quiz-sampling-1-answer_container" class="shiny-html-output"></div>
<div id="quiz-sampling-1-message_container" class="shiny-html-output"></div>
<div id="quiz-sampling-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz-sampling-2" class="tutorial-question panel-body">
<div id="quiz-sampling-2-answer_container" class="shiny-html-output"></div>
<div id="quiz-sampling-2-message_container" class="shiny-html-output"></div>
<div id="quiz-sampling-2-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div
style="padding: 10px; border-radius: 5px; background-color: #fef3e7;">
<p><span style="font-size: 1.2em; color: #d19554;">
<i class="fas fa-comment"></i> Reflection: </span></p>
<p><span style="color:#d19554;"> Smaller sample sizes are more
susceptible to sampling variability. With a limited number of
individuals, the likelihood of the sample deviating from the population
characteristics increases. Think about how this may or may not impact
your results. </span></p>
</div>
</div>
<div id="section-bonus-question" class="section level3">
<h3>✨ BONUS QUESTION ✨</h3>
<p>You will have noticed from our exploration above that the sample
differs from the population and it doesn’t always have the same age and
sex distribution.</p>
<div class="panel-heading tutorial-quiz-title">QUIZ - Sampling bias</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz-sampling-bias-1" class="tutorial-question panel-body">
<div id="quiz-sampling-bias-1-answer_container" class="shiny-html-output"></div>
<div id="quiz-sampling-bias-1-message_container" class="shiny-html-output"></div>
<div id="quiz-sampling-bias-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
</div>
<div
id="section-estimating-prevalence-in-our-sample-and-calculating-the-95-confidence-interval"
class="section level2">
<h2>Estimating prevalence in our sample and calculating the 95%
confidence interval</h2>
<p>Our next topic focuses on calculating the 95% confidence interval
(CI) using the Wald method. When estimating the prevalence of malaria in
a sample, we start with a <em>point estimate</em>. However, it’s equally
important to calculate the 95% CI to capture the variability around this
estimate. The CI provides an interval with defined lower and upper
bounds, representing the range within which we are 95% confident the
true population prevalence lies. In other words, if we were to repeat
the sampling process many times and calculate a confidence interval for
each sample, approximately 95 out of 100 of these intervals would
contain the true population prevalence.</p>
<div id="section-estimating-prevalence-in-our-sample"
class="section level3">
<h3>Estimating prevalence in our sample</h3>
<p>For this exercise we have already pre-calculated some useful
parameters:</p>
<ul>
<li>Defined <code>sample_size</code> to be 200</li>
<li>Defined <code>infected_count</code> to be the number of infected
individuals in our sample (in our example it is 69 individuals)</li>
<li>Defined the function <code>sampleFromPopulation()</code> to select
200 individuals at random from our census</li>
</ul>
<p>Below is the code we ran for reference, but you don’t have to run it
yourself as everything is already loaded.</p>
<pre class="r"><code># set the sample size
sample_size &lt;- 200

# sample from the population
sample_data &lt;- sampleFromPopulation(sample_size, census) 

# Count number of infected individuals in the sample
infected_count &lt;- sum(sample_data$malaria_infection == &quot;Infected&quot;)</code></pre>
</div>
<div
id="section-what-is-the-estimated-prevalence-of-malaria-in-our-sample"
class="section level3">
<h3>What is the estimated prevalence of malaria in our sample?</h3>
<p>We can calculate this by dividing the number of individuals infected
with malaria by our sample size.</p>
<p>Try coding it yourself, or click on the solution. <em>Note: In R when
we want to divide two things we can use <code>/</code>.</em></p>
<div class="tutorial-exercise" data-label="est-prev" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="est-prev-solution"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>69 / 200

# Or you can use the stored variables:
infected_count / sample_size</code></pre>
</div>
<details>
<summary style="text-decoration: underline; color: red;">
<p><svg aria-hidden="true" role="img" viewBox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg>Click
to see the answer</p>
</summary>
<p>Our estimated prevalence is 0.345 or 34.5%.</p>
</div>
<div id="section-calculating-the-95-ci" class="section level3">
<h3>Calculating the 95% CI</h3>
<p>Next, we need to calculate the 95% CI around our point estimate.</p>
<p>This is the formula for the <strong>Wald confidence
interval:</strong></p>
<p><span class="math display">\[
CI = \hat{p} \pm z_{1 - \alpha/2}\sqrt{\frac{\hat{p}(1-\hat{p})}{n}}
\]</span> Where:</p>
<ul>
<li><span class="math inline">\(\hat{p}\)</span> = sample
proportion</li>
<li><span class="math inline">\({n}\)</span> = sample size</li>
<li><span class="math inline">\(\ z_{1 - \alpha/2}\)</span> = critical
value of the normal distribution at significance level <span
class="math inline">\(\alpha\)</span> (two sided)</li>
</ul>
<p>We will now go through this formula step-by-step!</p>
<div id="section-defining-our-sample-proportion-hatp"
class="section level4">
<h4>1. Defining our sample proportion, <span
class="math inline">\(\hat{p}\)</span></h4>
<p>The sample proportion refers to the proportion of infected
individuals in our sample. We just calculated this above by dividing the
number of infected individuals in the sample by the total sample size.
Let’s do it again for good measure, and record it as
<code>p_hat</code>.</p>
<div class="tutorial-exercise" data-label="phat" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>p_hat &lt;-</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="phat-solution"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code># Sample proportion
p_hat &lt;- infected_count / sample_size
p_hat</code></pre>
</div>
<div id="section-sample-size-n" class="section level5">
<h5>2. Sample size, <span class="math inline">\(n\)</span></h5>
<p>Above, we defined our sample size to be n=200 and recorded it as
<code>sample_size</code>.</p>
</div>
<div id="section-calculating-the-standard-error" class="section level5">
<h5>3. Calculating the standard error</h5>
<p>We can calculate the standard error using <code>p_hat</code> and
<code>sample_size</code>. We can calculate the standard error using:</p>
<p><span class="math display">\[
SE = \sqrt{\frac{\hat{p}(1-\hat{p})}{n}}
\]</span></p>
<p><em>Note: In R the function to take the square root is
<code>sqrt()</code> and when we want to multiply two things we can use
<code>*</code>.</em></p>
<div class="tutorial-exercise" data-label="SE" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>SE &lt;- </code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="SE-solution"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code># Standard error
SE &lt;- sqrt((p_hat * (1 - p_hat)) / sample_size)
SE</code></pre>
</div>
<details>
<summary style="text-decoration: underline; color: red;">
<p><svg aria-hidden="true" role="img" viewBox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg>Click
to see the answer</p>
</summary>
<p>Our standard error is 0.034.</p>
</div>
<div id="section-calculating-the-confidence-interval"
class="section level5">
<h5>4. Calculating the confidence interval</h5>
<p>Now that we know our standard error, we can calculate the lower and
upper bounds of our 95% confidence interval (CI). To do this, we
multiply the standard error by <span
class="math inline">\(z_{1-\alpha/2}\)</span> , which is approximately
1.96 for a 95% CI. This factor is derived from the normal distribution,
where 95% of the probability lies within 1.96 standard deviations of the
mean, ensuring our interval reflects this range of uncertainty.</p>
Let’s start with the lower bound. Click on the solution if you need
help.
<div class="tutorial-exercise" data-label="ci-lower" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code># Critical value for 95% confidence
z_alpha &lt;- 1.96

# Lower bound</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="ci-lower-solution"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code># Critical value for 95% confidence
z_alpha &lt;- 1.96

# Lower bound
p_hat - z_alpha * SE</code></pre>
</div>
<details>
<summary style="text-decoration: underline; color: red;">
<p><svg aria-hidden="true" role="img" viewBox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg>Click
to see the answer</p>
</summary>
<p>Our lower bound is 0.279 or 27.9%.</p>
</details>
Now let’s calculate the upper bound. Remember now we need to
<em>add</em> instead of subtract.
<div class="tutorial-exercise" data-label="ci-upper" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code># Critical value for 95% confidence
z_alpha &lt;- 1.96

# Upper bound</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="ci-upper-solution"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code># Critical value for 95% confidence
z_alpha &lt;- 1.96

# Upper bound
p_hat + z_alpha * SE</code></pre>
</div>
<details>
<summary style="text-decoration: underline; color: red;">
<p><svg aria-hidden="true" role="img" viewBox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg>Click
to see the answer</p>
</summary>
Our upper bound is 0.411 or 41.1%.
</details>
Let’s put it all together!
<div class="tutorial-exercise" data-label="ci-calculation"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>infected_count &lt;- 69
sample_size &lt;- 200
z_alpha &lt;- 1.96

p_hat &lt;- infected_count / sample_size
SE &lt;- sqrt((p_hat * (1 - p_hat)) / sample_size)
CI_lower &lt;- p_hat - z_alpha * SE
CI_upper &lt;- p_hat + z_alpha * SE

# Print our values
p_hat
CI_lower
CI_upper</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<p>So, putting it all together, our estimated prevalence is 0.345 or
<strong>34.5%</strong> and our 95%CI is 27.9% to 41.1%.</p>
</div>
</div>
</div>
</div>
<div id="section-comparing-to-the-true-prevalence"
class="section level2">
<h2>Comparing to the true prevalence</h2>
<p>You may remember from our exploration of the census data earlier,
that <strong>26.78%</strong> of our population was infected with
malaria, in others this is the <em>true</em> prevalence.</p>
<div class="panel-heading tutorial-quiz-title">QUIZ - 95% confidence interval</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz-ci-prev-1" class="tutorial-question panel-body">
<div id="quiz-ci-prev-1-answer_container" class="shiny-html-output"></div>
<div id="quiz-ci-prev-1-message_container" class="shiny-html-output"></div>
<div id="quiz-ci-prev-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div
style="padding: 10px; border-radius: 5px; background-color: #fef3e7;">
<p><span style="font-size: 1.2em; color: #d19554;">
<i class="fas fa-comment"></i> Reflection: </span></p>
<p><span style="color:#d19554;"> Do you always expect the true
prevalence to fall within the 95%CI? </span></p>
</div>
</div>
<div id="section-how-often-does-true-prevalence-fall-within-the-95ci"
class="section level2">
<h2>How often does true prevalence fall within the 95%CI?</h2>
<p>We explored above what would happen if we randomly sampled 200
individuals. In this first example, the true prevalence didn’t fall
within the 95%CI. But this was just one example. Now we want to see what
happens if we repeat this sampling <em>many</em> times. Let’s now
explore by running a simulation where we sample 1000 times and we will
count how many times our true prevalence is within the 95%CI.</p>
<div
style="padding: 10px; border-radius: 5px; background-color: #fef3e7;">
<p><span style="font-size: 1.2em; color: #d19554;">
<i class="fas fa-comment"></i> Reflection: </span></p>
<p><span style="color:#d19554;"> Before you run the below code, think
about the intuition behind this - how often do you expect the true
prevalence to be within the 95%CI? </span></p>
</div>
<p>Now run the code and see if you were correct!</p>
<div class="tutorial-exercise" data-label="sim-ci" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>n_simulations &lt;- 1000
sample_size &lt;- 200

results &lt;- replicate(n_simulations, simulate_CI(census, sample_size, true_prevalence))

plotCISimulationResults(results, n_simulations)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="panel-heading tutorial-quiz-title">QUIZ - Confidence Intervals and Simulation</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz-sim-ci-1" class="tutorial-question panel-body">
<div id="quiz-sim-ci-1-answer_container" class="shiny-html-output"></div>
<div id="quiz-sim-ci-1-message_container" class="shiny-html-output"></div>
<div id="quiz-sim-ci-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz-sim-ci-2" class="tutorial-question panel-body">
<div id="quiz-sim-ci-2-answer_container" class="shiny-html-output"></div>
<div id="quiz-sim-ci-2-message_container" class="shiny-html-output"></div>
<div id="quiz-sim-ci-2-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz-sim-ci-3" class="tutorial-question panel-body">
<div id="quiz-sim-ci-3-answer_container" class="shiny-html-output"></div>
<div id="quiz-sim-ci-3-message_container" class="shiny-html-output"></div>
<div id="quiz-sim-ci-3-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<p>After running the simulation, you should notice that the true
prevalence falls within the 95% confidence intervals in approximately
<strong>95% of the simulations</strong>. This outcome aligns with the
definition of a 95% confidence interval: if we were to repeat the
sampling process many times, we would expect the true parameter to lie
within the calculated confidence interval about 95 out of 100 times.</p>
<div
style="padding: 10px; border-radius: 5px; background-color: #fef3e7;">
<p><span style="font-size: 1.2em; color: #d19554;">
<i class="fas fa-comment"></i> Reflection: </span></p>
<p><span style="color:#d19554;"> This simulation demonstrates the
concept of confidence level in statistical inference. It shows that the
method we use to calculate confidence intervals is reliable in the long
run. However, in any single sample (like the one we initially took),
there’s still a chance (about 5%) that the true prevalence will not be
captured within the interval. This is why it’s important to interpret
confidence intervals correctly and understand that they provide a
measure of the uncertainty associated with our estimates. </span></p>
</div>
<div id="section-bonus-questions" class="section level3">
<h3>✨ BONUS QUESTIONS ✨</h3>
<p><em>Note: This section is optional and requires more coding than the
previous exercise</em></p>
<p>Let’s repeat this exercise for a sample size of 500. Try coding it
yourself from scratch using the functions that we used above. Click on
the solution if you get stuck!</p>
<div class="tutorial-exercise" data-label="sampling-500"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>sample_size &lt;- 500</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support"
data-label="sampling-500-solution" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>sample_size &lt;- 500
sample_data &lt;- sampleFromPopulation(sample_size, census)
comparison &lt;- compareSampleToPopulation(sample_data, census)

plotAgeSexDistribution(comparison)
plotInfectedProportion(comparison)

infected_count &lt;- sum(sample_data$malaria_infection == &quot;Infected&quot;)

p_hat &lt;- infected_count / sample_size
SE &lt;- sqrt((p_hat * (1 - p_hat)) / sample_size)
CI_lower &lt;- p_hat - Z * SE
CI_upper &lt;- p_hat + Z * SE

checkPrevalenceCI(true_prevalence, CI_lower, CI_upper)

n_simulations &lt;- 1000
results &lt;- replicate(n_simulations, simulate_CI(census, sample_size, true_prevalence))
plotCISimulationResults(results, n_simulations)</code></pre>
</div>
<div
style="padding: 10px; border-radius: 5px; background-color: #fef3e7;">
<p><span style="font-size: 1.2em; color: #d19554;">
<i class="fas fa-comment"></i> Reflection: </span></p>
<p><span style="color:#d19554;"> Does the true prevalence
(<strong>26.78%</strong>) fall within our 95% CI? What do you notice
about the simulation results? </span></p>
</div>
<p>
<script type="application/shiny-prerendered" data-context="server-start">
# options(repos = c(
#   plasmogenepi = "https://plasmogenepi.r-universe.dev",
#   CRAN = "https://cloud.r-project.org"
# ))

library(learnr)
library(dplyr)
library(ggplot2)
library(knitr)
# library(DRpower)

knitr::opts_chunk$set(warning = FALSE,
                      echo = FALSE)

# needed for longer calculations (eg DRpower) note - in seconds
tutorial_options(exercise.timelimit = 120)

# FUNCTIONS
sampleFromPopulation <- function(sample_size, census){
  ss <- sample_size
  sample_data <- census %>% sample_n(ss, replace = F) # sample without replacement 
  
  return(sample_data)
}

compareSampleToPopulation <- function(sample, census){
  comparison <- bind_rows(
    census %>% mutate(group = "Population") %>% select(age, sex, malaria_infection, group),
    sample %>% mutate(group = "Sample") %>% select(age, sex, malaria_infection, group))
  
  return(comparison)
}

plotAgeSexDistribution <- function(comparison){
  comparison %>% 
  ggplot(aes(x = age, fill = sex)) +
    geom_histogram(binwidth = 5, color = "white", boundary = 0) +
    scale_fill_brewer(palette = "Set2") +
    labs(title = "Age and sex distribution", x = "Age (years)", y = "Count") +
    theme_minimal() +
    facet_wrap(~group, scales = "free_y")
}

plotInfectedProportion <- function(comparison){
  comparison %>% 
    count(group, malaria_infection) %>% 
    group_by(group) %>% 
    mutate(proportion = n/sum(n)) %>% 
    ungroup() %>% 
    ggplot(aes(x = group, y = proportion, fill = malaria_infection)) +
      geom_bar(stat = "identity") +
      geom_text(aes(label = scales::percent(proportion, accuracy = 0.1)), 
                color = "white",
                position = position_stack(vjust = 0.5),
                size = 4,
                show.legend = F) +
      scale_fill_brewer(palette = "Set1",
                        name = NULL) +
      scale_color_brewer(palette = "Set1") +
      scale_y_continuous(labels = scales::percent) +
      labs(title = "Malaria infection status", x = "", y = "") +
      theme_minimal()
}

checkPrevalenceCI <- function(true_prevalence, CI_lower, CI_upper){
  if(true_prevalence >= CI_lower & true_prevalence <= CI_upper){
    print(paste0("The true prevalence (", round(true_prevalence*100, 2),"%) falls within the 95%CI (", round(CI_lower*100, 2),"- ", round(CI_upper*100, 2), "%)"))
  }
  else {
    print(paste0("The true prevalence (", round(true_prevalence*100, 2),"%) does not fall within the 95%CI (", round(CI_lower*100, 2),"- ", round(CI_upper*100, 2), "%)"))
  }
}

simulate_CI <- function(census, sample_size, true_prevalence) {
  sample_data <- census %>% sample_n(sample_size, replace = F)
  infected_count <- sum(sample_data$malaria_infection == "Infected")
  p_hat <- infected_count / sample_size
  SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)
  CI_lower <- p_hat - Z * SE
  CI_upper <- p_hat + Z * SE
  (true_prevalence >= CI_lower) & (true_prevalence <= CI_upper)
}

plotCISimulationResults <- function(results, n_simulations){
  results_df <- data.frame(result = results) %>% 
                mutate(result = case_when(result == FALSE ~ "Not within 95%CI",
                                          result == TRUE ~ "Within 95%CI"))
  
  results_df %>% 
  count(result) %>% 
  mutate(proportion = n/sum(n)) %>% 
  ggplot(aes(x = "", y = proportion, fill = result)) +
    geom_bar(stat = "identity",
             position = "fill",
             width = 0.5) +
    geom_text(aes(label = scales::percent(proportion, accuracy = 0.1),
                  color = result), 
            position = position_fill(vjust = 0.9), 
            size = 4,
            show.legend = F) +
    scale_fill_manual(values = c("Not within 95%CI" = "grey", "Within 95%CI" = "magenta4"),
                      name = NULL) +
    scale_color_manual(values = c("Not within 95%CI" = "grey30", "Within 95%CI" = "white"),
                      name = NULL) +
    scale_y_continuous(labels = scales::percent) +
    labs(title = paste0("Simulation results (N=", n_simulations, " simulations)"), x = "", y = "") +
    coord_flip() +
    theme_minimal() +
    theme(axis.ticks.y = element_blank(), axis.text.y = element_blank())
}

# PRE-LOADED DATA

# fake census data
# N <- 10000
# 
# set.seed(1234)
# 
# census <- data.frame(
#   id = 1:N,
#   age = sample(0:80, N, replace = TRUE), # not really realistic, eg 'young population' but maybe OK for these purposes?
#   sex = sample(c("Male", "Female"), N, replace = TRUE) #,
#   # malaria_infection = sample(c("Infected", "Not infected"), N, replace = TRUE, prob = c(0.3, 0.7)
# )
# 
# census <- census %>% 
#   # infection probability higher in children
#   mutate(infection_prob = case_when(age >=0 & age <= 14 ~ 0.60,
#                                     age > 14 & age <=44 ~ 0.30,
#                                     age > 44 ~ 0.10,
#                                     TRUE ~ 0.25),
#          malaria_infection = ifelse(runif(n()) <= infection_prob, "Infected", "Not infected")) %>% 
#   select(-infection_prob)
# 
# saveRDS(census, "data/census.rds")

census <- readRDS("data/census.rds")

# GLOBAL PARAMS FOR EXERCISES
true_infected_count <- sum(census$malaria_infection == "Infected")
true_prevalence <- true_infected_count / 10000

# get random sample
# set.seed(5) # to ensure we get the same random sample for our tutorial calculations

# set the sample size
# sample_size <- 200

# sample from the population
# sample_data <- sampleFromPopulation(sample_size, census) 
# saveRDS(sample_data, "tutorials/data/sample_data.rds")

# sample_data <- readRDS("tutorials/data/sample_data.rds")

# Number of infected individuals in the sample
# infected_count <- sum(sample_data$malaria_infection == "Infected")
# 
# p_hat <- infected_count / sample_size
# SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)
Z <- 1.96
# CI_lower <- p_hat - Z * SE
# CI_upper <- p_hat + Z * SE
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::register_http_handlers(session, metadata = NULL)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::prepare_tutorial_state(session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::i18n_observe_tutorial_language(input, session)
</script>


<script type="application/shiny-prerendered" data-context="server">
session$onSessionEnded(function() {
        learnr:::event_trigger(session, "session_stop")
      })
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "quiz-study-pop-1", 
    question = structure("We want to estimate the prevalence of malaria infection in a community of 10,000 people. Which of the following is the target population?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_7669f2", 
        option = "All residents", value = "All residents", label = structure("All residents", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_bc34462", 
        option = "Only women or only men", value = "Only women or only men", 
        label = structure("Only women or only men", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = structure("If we want to estimate the prevalence in the <em>community<\u002fem> we don’t want to focus only on women or men. <br>", html = TRUE, class = c("html", 
        "character")), type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_282f404", 
        option = "Only children under 5 years old", value = "Only children under 5 years old", 
        label = structure("Only children under 5 years old", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = structure("If we want to estimate the prevalence in the <em>community<\u002fem> we don’t want to focus only on children. <br>", html = TRUE, class = c("html", 
        "character")), type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_10a050e", 
        option = "Adults over 60 years old", value = "Adults over 60 years old", 
        label = structure("Adults over 60 years old", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = structure("If we want to estimate the prevalence in the <em>community<\u002fem> we don’t want to focus on adults. <br>", html = TRUE, class = c("html", 
        "character")), type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("That is correct! Our target population should be a sample of all the community residents, not a specific demographic or group.", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("If we want to estimate the prevalence in the <em>community<\u002fem> we don’t want to focus on a specific demographic or group. <br>", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz-study-pop-1-answer", question = "quiz-study-pop-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1692503156.21187, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-sampling-1-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-sampling-1-code-editor`)), session)
output$`tutorial-exercise-sampling-1-output` <- renderUI({
  `tutorial-exercise-sampling-1-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "sampling-1", global_setup = structure(c("# options(repos = c(", 
"#   plasmogenepi = \"https://plasmogenepi.r-universe.dev\",", 
"#   CRAN = \"https://cloud.r-project.org\"", "# ))", "", "library(learnr)", 
"library(dplyr)", "library(ggplot2)", "library(knitr)", "# library(DRpower)", 
"", "knitr::opts_chunk$set(warning = FALSE,", "                      echo = FALSE)", 
"", "# needed for longer calculations (eg DRpower) note - in seconds", 
"tutorial_options(exercise.timelimit = 120)", "", "# FUNCTIONS", 
"sampleFromPopulation <- function(sample_size, census){", "  ss <- sample_size", 
"  sample_data <- census %>% sample_n(ss, replace = F) # sample without replacement ", 
"  ", "  return(sample_data)", "}", "", "compareSampleToPopulation <- function(sample, census){", 
"  comparison <- bind_rows(", "    census %>% mutate(group = \"Population\") %>% select(age, sex, malaria_infection, group),", 
"    sample %>% mutate(group = \"Sample\") %>% select(age, sex, malaria_infection, group))", 
"  ", "  return(comparison)", "}", "", "plotAgeSexDistribution <- function(comparison){", 
"  comparison %>% ", "  ggplot(aes(x = age, fill = sex)) +", 
"    geom_histogram(binwidth = 5, color = \"white\", boundary = 0) +", 
"    scale_fill_brewer(palette = \"Set2\") +", "    labs(title = \"Age and sex distribution\", x = \"Age (years)\", y = \"Count\") +", 
"    theme_minimal() +", "    facet_wrap(~group, scales = \"free_y\")", 
"}", "", "plotInfectedProportion <- function(comparison){", "  comparison %>% ", 
"    count(group, malaria_infection) %>% ", "    group_by(group) %>% ", 
"    mutate(proportion = n/sum(n)) %>% ", "    ungroup() %>% ", 
"    ggplot(aes(x = group, y = proportion, fill = malaria_infection)) +", 
"      geom_bar(stat = \"identity\") +", "      geom_text(aes(label = scales::percent(proportion, accuracy = 0.1)), ", 
"                color = \"white\",", "                position = position_stack(vjust = 0.5),", 
"                size = 4,", "                show.legend = F) +", 
"      scale_fill_brewer(palette = \"Set1\",", "                        name = NULL) +", 
"      scale_color_brewer(palette = \"Set1\") +", "      scale_y_continuous(labels = scales::percent) +", 
"      labs(title = \"Malaria infection status\", x = \"\", y = \"\") +", 
"      theme_minimal()", "}", "", "checkPrevalenceCI <- function(true_prevalence, CI_lower, CI_upper){", 
"  if(true_prevalence >= CI_lower & true_prevalence <= CI_upper){", 
"    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) falls within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "  else {", "    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) does not fall within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "}", "", "simulate_CI <- function(census, sample_size, true_prevalence) {", 
"  sample_data <- census %>% sample_n(sample_size, replace = F)", 
"  infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"  p_hat <- infected_count / sample_size", "  SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"  CI_lower <- p_hat - Z * SE", "  CI_upper <- p_hat + Z * SE", 
"  (true_prevalence >= CI_lower) & (true_prevalence <= CI_upper)", 
"}", "", "plotCISimulationResults <- function(results, n_simulations){", 
"  results_df <- data.frame(result = results) %>% ", "                mutate(result = case_when(result == FALSE ~ \"Not within 95%CI\",", 
"                                          result == TRUE ~ \"Within 95%CI\"))", 
"  ", "  results_df %>% ", "  count(result) %>% ", "  mutate(proportion = n/sum(n)) %>% ", 
"  ggplot(aes(x = \"\", y = proportion, fill = result)) +", "    geom_bar(stat = \"identity\",", 
"             position = \"fill\",", "             width = 0.5) +", 
"    geom_text(aes(label = scales::percent(proportion, accuracy = 0.1),", 
"                  color = result), ", "            position = position_fill(vjust = 0.9), ", 
"            size = 4,", "            show.legend = F) +", "    scale_fill_manual(values = c(\"Not within 95%CI\" = \"grey\", \"Within 95%CI\" = \"magenta4\"),", 
"                      name = NULL) +", "    scale_color_manual(values = c(\"Not within 95%CI\" = \"grey30\", \"Within 95%CI\" = \"white\"),", 
"                      name = NULL) +", "    scale_y_continuous(labels = scales::percent) +", 
"    labs(title = paste0(\"Simulation results (N=\", n_simulations, \" simulations)\"), x = \"\", y = \"\") +", 
"    coord_flip() +", "    theme_minimal() +", "    theme(axis.ticks.y = element_blank(), axis.text.y = element_blank())", 
"}", "", "# PRE-LOADED DATA", "", "# fake census data", "# N <- 10000", 
"# ", "# set.seed(1234)", "# ", "# census <- data.frame(", "#   id = 1:N,", 
"#   age = sample(0:80, N, replace = TRUE), # not really realistic, eg 'young population' but maybe OK for these purposes?", 
"#   sex = sample(c(\"Male\", \"Female\"), N, replace = TRUE) #,", 
"#   # malaria_infection = sample(c(\"Infected\", \"Not infected\"), N, replace = TRUE, prob = c(0.3, 0.7)", 
"# )", "# ", "# census <- census %>% ", "#   # infection probability higher in children", 
"#   mutate(infection_prob = case_when(age >=0 & age <= 14 ~ 0.60,", 
"#                                     age > 14 & age <=44 ~ 0.30,", 
"#                                     age > 44 ~ 0.10,", "#                                     TRUE ~ 0.25),", 
"#          malaria_infection = ifelse(runif(n()) <= infection_prob, \"Infected\", \"Not infected\")) %>% ", 
"#   select(-infection_prob)", "# ", "# saveRDS(census, \"data/census.rds\")", 
"", "census <- readRDS(\"data/census.rds\")", "", "# GLOBAL PARAMS FOR EXERCISES", 
"true_infected_count <- sum(census$malaria_infection == \"Infected\")", 
"true_prevalence <- true_infected_count / 10000", "", "# get random sample", 
"# set.seed(5) # to ensure we get the same random sample for our tutorial calculations", 
"", "# set the sample size", "# sample_size <- 200", "", "# sample from the population", 
"# sample_data <- sampleFromPopulation(sample_size, census) ", 
"# saveRDS(sample_data, \"tutorials/data/sample_data.rds\")", 
"", "# sample_data <- readRDS(\"tutorials/data/sample_data.rds\")", 
"", "# Number of infected individuals in the sample", "# infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"# ", "# p_hat <- infected_count / sample_size", "# SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"Z <- 1.96", "# CI_lower <- p_hat - Z * SE", "# CI_upper <- p_hat + Z * SE"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "sampling-1", code = "sample <- sampleFromPopulation(sample_size = 200, census)\ncomparison <- compareSampleToPopulation(sample, census)\n\nplotAgeSexDistribution(comparison)\n\nplotInfectedProportion(comparison)", 
        opts = list(label = "\"sampling-1\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = NULL, tests = NULL, options = list(
        eval = FALSE, echo = TRUE, results = "markup", tidy = FALSE, 
        tidy.opts = NULL, collapse = FALSE, prompt = FALSE, comment = NA, 
        highlight = FALSE, size = "normalsize", background = "#F7F7F7", 
        strip.white = TRUE, cache = 0, cache.path = "module1_sampling_interactive_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "module1_sampling_interactive_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = FALSE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, exercise.timelimit = 120, label = "sampling-1", 
        exercise = TRUE, code = c("sample <- sampleFromPopulation(sample_size = 200, census)", 
        "comparison <- compareSampleToPopulation(sample, census)", 
        "", "plotAgeSexDistribution(comparison)", "", "plotInfectedProportion(comparison)"
        ), out.width.px = 624, out.height.px = 384, params.src = "sampling-1, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-sampling-2-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-sampling-2-code-editor`)), session)
output$`tutorial-exercise-sampling-2-output` <- renderUI({
  `tutorial-exercise-sampling-2-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "sampling-2", global_setup = structure(c("# options(repos = c(", 
"#   plasmogenepi = \"https://plasmogenepi.r-universe.dev\",", 
"#   CRAN = \"https://cloud.r-project.org\"", "# ))", "", "library(learnr)", 
"library(dplyr)", "library(ggplot2)", "library(knitr)", "# library(DRpower)", 
"", "knitr::opts_chunk$set(warning = FALSE,", "                      echo = FALSE)", 
"", "# needed for longer calculations (eg DRpower) note - in seconds", 
"tutorial_options(exercise.timelimit = 120)", "", "# FUNCTIONS", 
"sampleFromPopulation <- function(sample_size, census){", "  ss <- sample_size", 
"  sample_data <- census %>% sample_n(ss, replace = F) # sample without replacement ", 
"  ", "  return(sample_data)", "}", "", "compareSampleToPopulation <- function(sample, census){", 
"  comparison <- bind_rows(", "    census %>% mutate(group = \"Population\") %>% select(age, sex, malaria_infection, group),", 
"    sample %>% mutate(group = \"Sample\") %>% select(age, sex, malaria_infection, group))", 
"  ", "  return(comparison)", "}", "", "plotAgeSexDistribution <- function(comparison){", 
"  comparison %>% ", "  ggplot(aes(x = age, fill = sex)) +", 
"    geom_histogram(binwidth = 5, color = \"white\", boundary = 0) +", 
"    scale_fill_brewer(palette = \"Set2\") +", "    labs(title = \"Age and sex distribution\", x = \"Age (years)\", y = \"Count\") +", 
"    theme_minimal() +", "    facet_wrap(~group, scales = \"free_y\")", 
"}", "", "plotInfectedProportion <- function(comparison){", "  comparison %>% ", 
"    count(group, malaria_infection) %>% ", "    group_by(group) %>% ", 
"    mutate(proportion = n/sum(n)) %>% ", "    ungroup() %>% ", 
"    ggplot(aes(x = group, y = proportion, fill = malaria_infection)) +", 
"      geom_bar(stat = \"identity\") +", "      geom_text(aes(label = scales::percent(proportion, accuracy = 0.1)), ", 
"                color = \"white\",", "                position = position_stack(vjust = 0.5),", 
"                size = 4,", "                show.legend = F) +", 
"      scale_fill_brewer(palette = \"Set1\",", "                        name = NULL) +", 
"      scale_color_brewer(palette = \"Set1\") +", "      scale_y_continuous(labels = scales::percent) +", 
"      labs(title = \"Malaria infection status\", x = \"\", y = \"\") +", 
"      theme_minimal()", "}", "", "checkPrevalenceCI <- function(true_prevalence, CI_lower, CI_upper){", 
"  if(true_prevalence >= CI_lower & true_prevalence <= CI_upper){", 
"    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) falls within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "  else {", "    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) does not fall within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "}", "", "simulate_CI <- function(census, sample_size, true_prevalence) {", 
"  sample_data <- census %>% sample_n(sample_size, replace = F)", 
"  infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"  p_hat <- infected_count / sample_size", "  SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"  CI_lower <- p_hat - Z * SE", "  CI_upper <- p_hat + Z * SE", 
"  (true_prevalence >= CI_lower) & (true_prevalence <= CI_upper)", 
"}", "", "plotCISimulationResults <- function(results, n_simulations){", 
"  results_df <- data.frame(result = results) %>% ", "                mutate(result = case_when(result == FALSE ~ \"Not within 95%CI\",", 
"                                          result == TRUE ~ \"Within 95%CI\"))", 
"  ", "  results_df %>% ", "  count(result) %>% ", "  mutate(proportion = n/sum(n)) %>% ", 
"  ggplot(aes(x = \"\", y = proportion, fill = result)) +", "    geom_bar(stat = \"identity\",", 
"             position = \"fill\",", "             width = 0.5) +", 
"    geom_text(aes(label = scales::percent(proportion, accuracy = 0.1),", 
"                  color = result), ", "            position = position_fill(vjust = 0.9), ", 
"            size = 4,", "            show.legend = F) +", "    scale_fill_manual(values = c(\"Not within 95%CI\" = \"grey\", \"Within 95%CI\" = \"magenta4\"),", 
"                      name = NULL) +", "    scale_color_manual(values = c(\"Not within 95%CI\" = \"grey30\", \"Within 95%CI\" = \"white\"),", 
"                      name = NULL) +", "    scale_y_continuous(labels = scales::percent) +", 
"    labs(title = paste0(\"Simulation results (N=\", n_simulations, \" simulations)\"), x = \"\", y = \"\") +", 
"    coord_flip() +", "    theme_minimal() +", "    theme(axis.ticks.y = element_blank(), axis.text.y = element_blank())", 
"}", "", "# PRE-LOADED DATA", "", "# fake census data", "# N <- 10000", 
"# ", "# set.seed(1234)", "# ", "# census <- data.frame(", "#   id = 1:N,", 
"#   age = sample(0:80, N, replace = TRUE), # not really realistic, eg 'young population' but maybe OK for these purposes?", 
"#   sex = sample(c(\"Male\", \"Female\"), N, replace = TRUE) #,", 
"#   # malaria_infection = sample(c(\"Infected\", \"Not infected\"), N, replace = TRUE, prob = c(0.3, 0.7)", 
"# )", "# ", "# census <- census %>% ", "#   # infection probability higher in children", 
"#   mutate(infection_prob = case_when(age >=0 & age <= 14 ~ 0.60,", 
"#                                     age > 14 & age <=44 ~ 0.30,", 
"#                                     age > 44 ~ 0.10,", "#                                     TRUE ~ 0.25),", 
"#          malaria_infection = ifelse(runif(n()) <= infection_prob, \"Infected\", \"Not infected\")) %>% ", 
"#   select(-infection_prob)", "# ", "# saveRDS(census, \"data/census.rds\")", 
"", "census <- readRDS(\"data/census.rds\")", "", "# GLOBAL PARAMS FOR EXERCISES", 
"true_infected_count <- sum(census$malaria_infection == \"Infected\")", 
"true_prevalence <- true_infected_count / 10000", "", "# get random sample", 
"# set.seed(5) # to ensure we get the same random sample for our tutorial calculations", 
"", "# set the sample size", "# sample_size <- 200", "", "# sample from the population", 
"# sample_data <- sampleFromPopulation(sample_size, census) ", 
"# saveRDS(sample_data, \"tutorials/data/sample_data.rds\")", 
"", "# sample_data <- readRDS(\"tutorials/data/sample_data.rds\")", 
"", "# Number of infected individuals in the sample", "# infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"# ", "# p_hat <- infected_count / sample_size", "# SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"Z <- 1.96", "# CI_lower <- p_hat - Z * SE", "# CI_upper <- p_hat + Z * SE"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "sampling-2", code = "sample <- sampleFromPopulation(sample_size = 200, census)\ncomparison <- compareSampleToPopulation(sample, census)\n\nplotAgeSexDistribution(comparison)\nplotInfectedProportion(comparison)", 
        opts = list(label = "\"sampling-2\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = NULL, tests = NULL, options = list(
        eval = FALSE, echo = TRUE, results = "markup", tidy = FALSE, 
        tidy.opts = NULL, collapse = FALSE, prompt = FALSE, comment = NA, 
        highlight = FALSE, size = "normalsize", background = "#F7F7F7", 
        strip.white = TRUE, cache = 0, cache.path = "module1_sampling_interactive_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "module1_sampling_interactive_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = FALSE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, exercise.timelimit = 120, label = "sampling-2", 
        exercise = TRUE, code = c("sample <- sampleFromPopulation(sample_size = 200, census)", 
        "comparison <- compareSampleToPopulation(sample, census)", 
        "", "plotAgeSexDistribution(comparison)", "plotInfectedProportion(comparison)"
        ), out.width.px = 624, out.height.px = 384, params.src = "sampling-2, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz-sampling-1", 
    question = structure("Was the sample always the same?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_68794fb", 
        option = "Yes", value = "Yes", label = structure("Yes", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_8fa4407", 
        option = "No", value = "No", label = structure("No", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("That is correct! Our sample changes every time we randomly draw a sample from a population.", html = TRUE, class = c("html", 
    "character")), try_again = structure("Are you sure? Try running the code above a few more times. Is it always reflective of the population in terms of age and sex distribution and/or with respect to the proportion of people infected?", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Are you sure? Try running the code above a few more times. Is it always reflective of the population in terms of age and sex distribution and/or with respect to the proportion of people infected?", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz-sampling-1-answer", question = "quiz-sampling-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 642439871.200841, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz-sampling-2", 
    question = structure("Does our sample of 200 always reflect the population?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_cba9e09", 
        option = "Yes", value = "Yes", label = structure("Yes", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_b20325d", 
        option = "No", value = "No", label = structure("No", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("That is correct! When we have small sample sizes this can lead to high uncertainty and more variability thus our sample may not be representative of the population.", html = TRUE, class = c("html", 
    "character")), try_again = structure("Are you sure? Try running the code above a few more times. You could even replace 200 with 50 to see how this impacts the results. Is it always reflective of the population in terms of age and sex distribution and/or with respect to the proportion of people infected? Smaller sample sizes are more susceptible to sampling variability. With a limited number of individuals, the likelihood of the sample deviating from the population characteristics increases.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Are you sure? Try running the code above a few more times. You could even replace 200 with 50 to see how this impacts the results. Is it always reflective of the population in terms of age and sex distribution and/or with respect to the proportion of people infected? Smaller sample sizes are more susceptible to sampling variability. With a limited number of individuals, the likelihood of the sample deviating from the population characteristics increases.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz-sampling-2-answer", question = "quiz-sampling-2"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 769124299.641849, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz-sampling-bias-1", 
    question = structure("Does this mean our sampling approach is biased?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_84376c9", 
        option = "Yes", value = "Yes", label = structure("Yes", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_d3204da", 
        option = "No", value = "No", label = structure("No", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("That is correct! This does not necessarily mean our sampling approach is biased. Bias refers to a <em>systematic error<\u002fem> that consistently favors certain outcomes. However, because we are randomly sampling 200 individuals with <em>equal chance of being selected<\u002fem> our sampling approach is not biased. This can occur even if the characteristics of our sample (e.g., age and sex distribution) may not perfectly match those of the population.", html = TRUE, class = c("html", 
    "character")), try_again = structure("That is not correct! Although our sample was not always reflective of the population (for example, the characteristics like age and sex distribution did not perfectly match), our <em>sampling<\u002fem> method was unbiased because we randomly sampled 200 individuals and each person had an equal chance of being selected. Bias refers to a <em>systematic error<\u002fem> that consistently favors certain outcomes, which was not the case here.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("That is not correct! Although our sample was not always reflective of the population (for example, the characteristics like age and sex distribution did not perfectly match), our <em>sampling<\u002fem> method was unbiased because we randomly sampled 200 individuals and each person had an equal chance of being selected. Bias refers to a <em>systematic error<\u002fem> that consistently favors certain outcomes, which was not the case here.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz-sampling-bias-1-answer", question = "quiz-sampling-bias-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 791562102.1314, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-est-prev-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-est-prev-code-editor`)), session)
output$`tutorial-exercise-est-prev-output` <- renderUI({
  `tutorial-exercise-est-prev-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "est-prev", global_setup = structure(c("# options(repos = c(", 
"#   plasmogenepi = \"https://plasmogenepi.r-universe.dev\",", 
"#   CRAN = \"https://cloud.r-project.org\"", "# ))", "", "library(learnr)", 
"library(dplyr)", "library(ggplot2)", "library(knitr)", "# library(DRpower)", 
"", "knitr::opts_chunk$set(warning = FALSE,", "                      echo = FALSE)", 
"", "# needed for longer calculations (eg DRpower) note - in seconds", 
"tutorial_options(exercise.timelimit = 120)", "", "# FUNCTIONS", 
"sampleFromPopulation <- function(sample_size, census){", "  ss <- sample_size", 
"  sample_data <- census %>% sample_n(ss, replace = F) # sample without replacement ", 
"  ", "  return(sample_data)", "}", "", "compareSampleToPopulation <- function(sample, census){", 
"  comparison <- bind_rows(", "    census %>% mutate(group = \"Population\") %>% select(age, sex, malaria_infection, group),", 
"    sample %>% mutate(group = \"Sample\") %>% select(age, sex, malaria_infection, group))", 
"  ", "  return(comparison)", "}", "", "plotAgeSexDistribution <- function(comparison){", 
"  comparison %>% ", "  ggplot(aes(x = age, fill = sex)) +", 
"    geom_histogram(binwidth = 5, color = \"white\", boundary = 0) +", 
"    scale_fill_brewer(palette = \"Set2\") +", "    labs(title = \"Age and sex distribution\", x = \"Age (years)\", y = \"Count\") +", 
"    theme_minimal() +", "    facet_wrap(~group, scales = \"free_y\")", 
"}", "", "plotInfectedProportion <- function(comparison){", "  comparison %>% ", 
"    count(group, malaria_infection) %>% ", "    group_by(group) %>% ", 
"    mutate(proportion = n/sum(n)) %>% ", "    ungroup() %>% ", 
"    ggplot(aes(x = group, y = proportion, fill = malaria_infection)) +", 
"      geom_bar(stat = \"identity\") +", "      geom_text(aes(label = scales::percent(proportion, accuracy = 0.1)), ", 
"                color = \"white\",", "                position = position_stack(vjust = 0.5),", 
"                size = 4,", "                show.legend = F) +", 
"      scale_fill_brewer(palette = \"Set1\",", "                        name = NULL) +", 
"      scale_color_brewer(palette = \"Set1\") +", "      scale_y_continuous(labels = scales::percent) +", 
"      labs(title = \"Malaria infection status\", x = \"\", y = \"\") +", 
"      theme_minimal()", "}", "", "checkPrevalenceCI <- function(true_prevalence, CI_lower, CI_upper){", 
"  if(true_prevalence >= CI_lower & true_prevalence <= CI_upper){", 
"    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) falls within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "  else {", "    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) does not fall within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "}", "", "simulate_CI <- function(census, sample_size, true_prevalence) {", 
"  sample_data <- census %>% sample_n(sample_size, replace = F)", 
"  infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"  p_hat <- infected_count / sample_size", "  SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"  CI_lower <- p_hat - Z * SE", "  CI_upper <- p_hat + Z * SE", 
"  (true_prevalence >= CI_lower) & (true_prevalence <= CI_upper)", 
"}", "", "plotCISimulationResults <- function(results, n_simulations){", 
"  results_df <- data.frame(result = results) %>% ", "                mutate(result = case_when(result == FALSE ~ \"Not within 95%CI\",", 
"                                          result == TRUE ~ \"Within 95%CI\"))", 
"  ", "  results_df %>% ", "  count(result) %>% ", "  mutate(proportion = n/sum(n)) %>% ", 
"  ggplot(aes(x = \"\", y = proportion, fill = result)) +", "    geom_bar(stat = \"identity\",", 
"             position = \"fill\",", "             width = 0.5) +", 
"    geom_text(aes(label = scales::percent(proportion, accuracy = 0.1),", 
"                  color = result), ", "            position = position_fill(vjust = 0.9), ", 
"            size = 4,", "            show.legend = F) +", "    scale_fill_manual(values = c(\"Not within 95%CI\" = \"grey\", \"Within 95%CI\" = \"magenta4\"),", 
"                      name = NULL) +", "    scale_color_manual(values = c(\"Not within 95%CI\" = \"grey30\", \"Within 95%CI\" = \"white\"),", 
"                      name = NULL) +", "    scale_y_continuous(labels = scales::percent) +", 
"    labs(title = paste0(\"Simulation results (N=\", n_simulations, \" simulations)\"), x = \"\", y = \"\") +", 
"    coord_flip() +", "    theme_minimal() +", "    theme(axis.ticks.y = element_blank(), axis.text.y = element_blank())", 
"}", "", "# PRE-LOADED DATA", "", "# fake census data", "# N <- 10000", 
"# ", "# set.seed(1234)", "# ", "# census <- data.frame(", "#   id = 1:N,", 
"#   age = sample(0:80, N, replace = TRUE), # not really realistic, eg 'young population' but maybe OK for these purposes?", 
"#   sex = sample(c(\"Male\", \"Female\"), N, replace = TRUE) #,", 
"#   # malaria_infection = sample(c(\"Infected\", \"Not infected\"), N, replace = TRUE, prob = c(0.3, 0.7)", 
"# )", "# ", "# census <- census %>% ", "#   # infection probability higher in children", 
"#   mutate(infection_prob = case_when(age >=0 & age <= 14 ~ 0.60,", 
"#                                     age > 14 & age <=44 ~ 0.30,", 
"#                                     age > 44 ~ 0.10,", "#                                     TRUE ~ 0.25),", 
"#          malaria_infection = ifelse(runif(n()) <= infection_prob, \"Infected\", \"Not infected\")) %>% ", 
"#   select(-infection_prob)", "# ", "# saveRDS(census, \"data/census.rds\")", 
"", "census <- readRDS(\"data/census.rds\")", "", "# GLOBAL PARAMS FOR EXERCISES", 
"true_infected_count <- sum(census$malaria_infection == \"Infected\")", 
"true_prevalence <- true_infected_count / 10000", "", "# get random sample", 
"# set.seed(5) # to ensure we get the same random sample for our tutorial calculations", 
"", "# set the sample size", "# sample_size <- 200", "", "# sample from the population", 
"# sample_data <- sampleFromPopulation(sample_size, census) ", 
"# saveRDS(sample_data, \"tutorials/data/sample_data.rds\")", 
"", "# sample_data <- readRDS(\"tutorials/data/sample_data.rds\")", 
"", "# Number of infected individuals in the sample", "# infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"# ", "# p_hat <- infected_count / sample_size", "# SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"Z <- 1.96", "# CI_lower <- p_hat - Z * SE", "# CI_upper <- p_hat + Z * SE"
), chunk_opts = list(label = "setup", include = FALSE)), setup = "set.seed(5) # to ensure we get the same random sample for our tutorial calculations\n\n# set the sample size\nsample_size <- 200\n\n# sample from the population\nsample_data <- sampleFromPopulation(sample_size, census) \n\n# Count number of infected individuals in the sample\ninfected_count <- sum(sample_data$malaria_infection == \"Infected\")\n\n# p_hat\np_hat <- infected_count/sample_size\n\n# Z\nZ <- 1.96\n\n# SE\nSE <- sqrt((p_hat * (1 - p_hat)) / sample_size)\n\n# CI\nCI_lower <- p_hat - Z * SE\nCI_upper <- p_hat + Z * SE", 
    chunks = list(list(label = "sample-seed-params", code = "set.seed(5) # to ensure we get the same random sample for our tutorial calculations\n\n# set the sample size\nsample_size <- 200\n\n# sample from the population\nsample_data <- sampleFromPopulation(sample_size, census) \n\n# Count number of infected individuals in the sample\ninfected_count <- sum(sample_data$malaria_infection == \"Infected\")\n\n# p_hat\np_hat <- infected_count/sample_size\n\n# Z\nZ <- 1.96\n\n# SE\nSE <- sqrt((p_hat * (1 - p_hat)) / sample_size)\n\n# CI\nCI_lower <- p_hat - Z * SE\nCI_upper <- p_hat + Z * SE", 
        opts = list(label = "\"sample-seed-params\""), engine = "r"), 
        list(label = "est-prev", code = "", opts = list(label = "\"est-prev\"", 
            exercise = "TRUE", exercise.setup = "\"sample-seed-params\""), 
            engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = structure(c("69 / 200", "", "# Or you can use the stored variables:", 
    "infected_count / sample_size"), chunk_opts = list(label = "est-prev-solution")), 
    tests = NULL, options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "module1_sampling_interactive_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "module1_sampling_interactive_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = FALSE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, exercise.timelimit = 120, label = "est-prev", 
        exercise = TRUE, exercise.setup = "sample-seed-params", 
        code = "", out.width.px = 624, out.height.px = 384, params.src = "est-prev, exercise = TRUE, exercise.setup = \"sample-seed-params\"", 
        fig.num = 0L, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-phat-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-phat-code-editor`)), session)
output$`tutorial-exercise-phat-output` <- renderUI({
  `tutorial-exercise-phat-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "phat", global_setup = structure(c("# options(repos = c(", 
"#   plasmogenepi = \"https://plasmogenepi.r-universe.dev\",", 
"#   CRAN = \"https://cloud.r-project.org\"", "# ))", "", "library(learnr)", 
"library(dplyr)", "library(ggplot2)", "library(knitr)", "# library(DRpower)", 
"", "knitr::opts_chunk$set(warning = FALSE,", "                      echo = FALSE)", 
"", "# needed for longer calculations (eg DRpower) note - in seconds", 
"tutorial_options(exercise.timelimit = 120)", "", "# FUNCTIONS", 
"sampleFromPopulation <- function(sample_size, census){", "  ss <- sample_size", 
"  sample_data <- census %>% sample_n(ss, replace = F) # sample without replacement ", 
"  ", "  return(sample_data)", "}", "", "compareSampleToPopulation <- function(sample, census){", 
"  comparison <- bind_rows(", "    census %>% mutate(group = \"Population\") %>% select(age, sex, malaria_infection, group),", 
"    sample %>% mutate(group = \"Sample\") %>% select(age, sex, malaria_infection, group))", 
"  ", "  return(comparison)", "}", "", "plotAgeSexDistribution <- function(comparison){", 
"  comparison %>% ", "  ggplot(aes(x = age, fill = sex)) +", 
"    geom_histogram(binwidth = 5, color = \"white\", boundary = 0) +", 
"    scale_fill_brewer(palette = \"Set2\") +", "    labs(title = \"Age and sex distribution\", x = \"Age (years)\", y = \"Count\") +", 
"    theme_minimal() +", "    facet_wrap(~group, scales = \"free_y\")", 
"}", "", "plotInfectedProportion <- function(comparison){", "  comparison %>% ", 
"    count(group, malaria_infection) %>% ", "    group_by(group) %>% ", 
"    mutate(proportion = n/sum(n)) %>% ", "    ungroup() %>% ", 
"    ggplot(aes(x = group, y = proportion, fill = malaria_infection)) +", 
"      geom_bar(stat = \"identity\") +", "      geom_text(aes(label = scales::percent(proportion, accuracy = 0.1)), ", 
"                color = \"white\",", "                position = position_stack(vjust = 0.5),", 
"                size = 4,", "                show.legend = F) +", 
"      scale_fill_brewer(palette = \"Set1\",", "                        name = NULL) +", 
"      scale_color_brewer(palette = \"Set1\") +", "      scale_y_continuous(labels = scales::percent) +", 
"      labs(title = \"Malaria infection status\", x = \"\", y = \"\") +", 
"      theme_minimal()", "}", "", "checkPrevalenceCI <- function(true_prevalence, CI_lower, CI_upper){", 
"  if(true_prevalence >= CI_lower & true_prevalence <= CI_upper){", 
"    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) falls within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "  else {", "    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) does not fall within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "}", "", "simulate_CI <- function(census, sample_size, true_prevalence) {", 
"  sample_data <- census %>% sample_n(sample_size, replace = F)", 
"  infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"  p_hat <- infected_count / sample_size", "  SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"  CI_lower <- p_hat - Z * SE", "  CI_upper <- p_hat + Z * SE", 
"  (true_prevalence >= CI_lower) & (true_prevalence <= CI_upper)", 
"}", "", "plotCISimulationResults <- function(results, n_simulations){", 
"  results_df <- data.frame(result = results) %>% ", "                mutate(result = case_when(result == FALSE ~ \"Not within 95%CI\",", 
"                                          result == TRUE ~ \"Within 95%CI\"))", 
"  ", "  results_df %>% ", "  count(result) %>% ", "  mutate(proportion = n/sum(n)) %>% ", 
"  ggplot(aes(x = \"\", y = proportion, fill = result)) +", "    geom_bar(stat = \"identity\",", 
"             position = \"fill\",", "             width = 0.5) +", 
"    geom_text(aes(label = scales::percent(proportion, accuracy = 0.1),", 
"                  color = result), ", "            position = position_fill(vjust = 0.9), ", 
"            size = 4,", "            show.legend = F) +", "    scale_fill_manual(values = c(\"Not within 95%CI\" = \"grey\", \"Within 95%CI\" = \"magenta4\"),", 
"                      name = NULL) +", "    scale_color_manual(values = c(\"Not within 95%CI\" = \"grey30\", \"Within 95%CI\" = \"white\"),", 
"                      name = NULL) +", "    scale_y_continuous(labels = scales::percent) +", 
"    labs(title = paste0(\"Simulation results (N=\", n_simulations, \" simulations)\"), x = \"\", y = \"\") +", 
"    coord_flip() +", "    theme_minimal() +", "    theme(axis.ticks.y = element_blank(), axis.text.y = element_blank())", 
"}", "", "# PRE-LOADED DATA", "", "# fake census data", "# N <- 10000", 
"# ", "# set.seed(1234)", "# ", "# census <- data.frame(", "#   id = 1:N,", 
"#   age = sample(0:80, N, replace = TRUE), # not really realistic, eg 'young population' but maybe OK for these purposes?", 
"#   sex = sample(c(\"Male\", \"Female\"), N, replace = TRUE) #,", 
"#   # malaria_infection = sample(c(\"Infected\", \"Not infected\"), N, replace = TRUE, prob = c(0.3, 0.7)", 
"# )", "# ", "# census <- census %>% ", "#   # infection probability higher in children", 
"#   mutate(infection_prob = case_when(age >=0 & age <= 14 ~ 0.60,", 
"#                                     age > 14 & age <=44 ~ 0.30,", 
"#                                     age > 44 ~ 0.10,", "#                                     TRUE ~ 0.25),", 
"#          malaria_infection = ifelse(runif(n()) <= infection_prob, \"Infected\", \"Not infected\")) %>% ", 
"#   select(-infection_prob)", "# ", "# saveRDS(census, \"data/census.rds\")", 
"", "census <- readRDS(\"data/census.rds\")", "", "# GLOBAL PARAMS FOR EXERCISES", 
"true_infected_count <- sum(census$malaria_infection == \"Infected\")", 
"true_prevalence <- true_infected_count / 10000", "", "# get random sample", 
"# set.seed(5) # to ensure we get the same random sample for our tutorial calculations", 
"", "# set the sample size", "# sample_size <- 200", "", "# sample from the population", 
"# sample_data <- sampleFromPopulation(sample_size, census) ", 
"# saveRDS(sample_data, \"tutorials/data/sample_data.rds\")", 
"", "# sample_data <- readRDS(\"tutorials/data/sample_data.rds\")", 
"", "# Number of infected individuals in the sample", "# infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"# ", "# p_hat <- infected_count / sample_size", "# SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"Z <- 1.96", "# CI_lower <- p_hat - Z * SE", "# CI_upper <- p_hat + Z * SE"
), chunk_opts = list(label = "setup", include = FALSE)), setup = "set.seed(5) # to ensure we get the same random sample for our tutorial calculations\n\n# set the sample size\nsample_size <- 200\n\n# sample from the population\nsample_data <- sampleFromPopulation(sample_size, census) \n\n# Count number of infected individuals in the sample\ninfected_count <- sum(sample_data$malaria_infection == \"Infected\")\n\n# p_hat\np_hat <- infected_count/sample_size\n\n# Z\nZ <- 1.96\n\n# SE\nSE <- sqrt((p_hat * (1 - p_hat)) / sample_size)\n\n# CI\nCI_lower <- p_hat - Z * SE\nCI_upper <- p_hat + Z * SE", 
    chunks = list(list(label = "sample-seed-params", code = "set.seed(5) # to ensure we get the same random sample for our tutorial calculations\n\n# set the sample size\nsample_size <- 200\n\n# sample from the population\nsample_data <- sampleFromPopulation(sample_size, census) \n\n# Count number of infected individuals in the sample\ninfected_count <- sum(sample_data$malaria_infection == \"Infected\")\n\n# p_hat\np_hat <- infected_count/sample_size\n\n# Z\nZ <- 1.96\n\n# SE\nSE <- sqrt((p_hat * (1 - p_hat)) / sample_size)\n\n# CI\nCI_lower <- p_hat - Z * SE\nCI_upper <- p_hat + Z * SE", 
        opts = list(label = "\"sample-seed-params\""), engine = "r"), 
        list(label = "phat", code = "p_hat <-", opts = list(label = "\"phat\"", 
            exercise = "TRUE", exercise.setup = "\"sample-seed-params\""), 
            engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = structure(c("# Sample proportion", 
    "p_hat <- infected_count / sample_size", "p_hat"), chunk_opts = list(
        label = "phat-solution")), tests = NULL, options = list(
        eval = FALSE, echo = TRUE, results = "markup", tidy = FALSE, 
        tidy.opts = NULL, collapse = FALSE, prompt = FALSE, comment = NA, 
        highlight = FALSE, size = "normalsize", background = "#F7F7F7", 
        strip.white = TRUE, cache = 0, cache.path = "module1_sampling_interactive_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "module1_sampling_interactive_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = FALSE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, exercise.timelimit = 120, label = "phat", 
        exercise = TRUE, exercise.setup = "sample-seed-params", 
        code = "p_hat <-", out.width.px = 624, out.height.px = 384, 
        params.src = "phat, exercise=TRUE, exercise.setup = \"sample-seed-params\"", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-SE-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-SE-code-editor`)), session)
output$`tutorial-exercise-SE-output` <- renderUI({
  `tutorial-exercise-SE-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "SE", global_setup = structure(c("# options(repos = c(", 
"#   plasmogenepi = \"https://plasmogenepi.r-universe.dev\",", 
"#   CRAN = \"https://cloud.r-project.org\"", "# ))", "", "library(learnr)", 
"library(dplyr)", "library(ggplot2)", "library(knitr)", "# library(DRpower)", 
"", "knitr::opts_chunk$set(warning = FALSE,", "                      echo = FALSE)", 
"", "# needed for longer calculations (eg DRpower) note - in seconds", 
"tutorial_options(exercise.timelimit = 120)", "", "# FUNCTIONS", 
"sampleFromPopulation <- function(sample_size, census){", "  ss <- sample_size", 
"  sample_data <- census %>% sample_n(ss, replace = F) # sample without replacement ", 
"  ", "  return(sample_data)", "}", "", "compareSampleToPopulation <- function(sample, census){", 
"  comparison <- bind_rows(", "    census %>% mutate(group = \"Population\") %>% select(age, sex, malaria_infection, group),", 
"    sample %>% mutate(group = \"Sample\") %>% select(age, sex, malaria_infection, group))", 
"  ", "  return(comparison)", "}", "", "plotAgeSexDistribution <- function(comparison){", 
"  comparison %>% ", "  ggplot(aes(x = age, fill = sex)) +", 
"    geom_histogram(binwidth = 5, color = \"white\", boundary = 0) +", 
"    scale_fill_brewer(palette = \"Set2\") +", "    labs(title = \"Age and sex distribution\", x = \"Age (years)\", y = \"Count\") +", 
"    theme_minimal() +", "    facet_wrap(~group, scales = \"free_y\")", 
"}", "", "plotInfectedProportion <- function(comparison){", "  comparison %>% ", 
"    count(group, malaria_infection) %>% ", "    group_by(group) %>% ", 
"    mutate(proportion = n/sum(n)) %>% ", "    ungroup() %>% ", 
"    ggplot(aes(x = group, y = proportion, fill = malaria_infection)) +", 
"      geom_bar(stat = \"identity\") +", "      geom_text(aes(label = scales::percent(proportion, accuracy = 0.1)), ", 
"                color = \"white\",", "                position = position_stack(vjust = 0.5),", 
"                size = 4,", "                show.legend = F) +", 
"      scale_fill_brewer(palette = \"Set1\",", "                        name = NULL) +", 
"      scale_color_brewer(palette = \"Set1\") +", "      scale_y_continuous(labels = scales::percent) +", 
"      labs(title = \"Malaria infection status\", x = \"\", y = \"\") +", 
"      theme_minimal()", "}", "", "checkPrevalenceCI <- function(true_prevalence, CI_lower, CI_upper){", 
"  if(true_prevalence >= CI_lower & true_prevalence <= CI_upper){", 
"    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) falls within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "  else {", "    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) does not fall within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "}", "", "simulate_CI <- function(census, sample_size, true_prevalence) {", 
"  sample_data <- census %>% sample_n(sample_size, replace = F)", 
"  infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"  p_hat <- infected_count / sample_size", "  SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"  CI_lower <- p_hat - Z * SE", "  CI_upper <- p_hat + Z * SE", 
"  (true_prevalence >= CI_lower) & (true_prevalence <= CI_upper)", 
"}", "", "plotCISimulationResults <- function(results, n_simulations){", 
"  results_df <- data.frame(result = results) %>% ", "                mutate(result = case_when(result == FALSE ~ \"Not within 95%CI\",", 
"                                          result == TRUE ~ \"Within 95%CI\"))", 
"  ", "  results_df %>% ", "  count(result) %>% ", "  mutate(proportion = n/sum(n)) %>% ", 
"  ggplot(aes(x = \"\", y = proportion, fill = result)) +", "    geom_bar(stat = \"identity\",", 
"             position = \"fill\",", "             width = 0.5) +", 
"    geom_text(aes(label = scales::percent(proportion, accuracy = 0.1),", 
"                  color = result), ", "            position = position_fill(vjust = 0.9), ", 
"            size = 4,", "            show.legend = F) +", "    scale_fill_manual(values = c(\"Not within 95%CI\" = \"grey\", \"Within 95%CI\" = \"magenta4\"),", 
"                      name = NULL) +", "    scale_color_manual(values = c(\"Not within 95%CI\" = \"grey30\", \"Within 95%CI\" = \"white\"),", 
"                      name = NULL) +", "    scale_y_continuous(labels = scales::percent) +", 
"    labs(title = paste0(\"Simulation results (N=\", n_simulations, \" simulations)\"), x = \"\", y = \"\") +", 
"    coord_flip() +", "    theme_minimal() +", "    theme(axis.ticks.y = element_blank(), axis.text.y = element_blank())", 
"}", "", "# PRE-LOADED DATA", "", "# fake census data", "# N <- 10000", 
"# ", "# set.seed(1234)", "# ", "# census <- data.frame(", "#   id = 1:N,", 
"#   age = sample(0:80, N, replace = TRUE), # not really realistic, eg 'young population' but maybe OK for these purposes?", 
"#   sex = sample(c(\"Male\", \"Female\"), N, replace = TRUE) #,", 
"#   # malaria_infection = sample(c(\"Infected\", \"Not infected\"), N, replace = TRUE, prob = c(0.3, 0.7)", 
"# )", "# ", "# census <- census %>% ", "#   # infection probability higher in children", 
"#   mutate(infection_prob = case_when(age >=0 & age <= 14 ~ 0.60,", 
"#                                     age > 14 & age <=44 ~ 0.30,", 
"#                                     age > 44 ~ 0.10,", "#                                     TRUE ~ 0.25),", 
"#          malaria_infection = ifelse(runif(n()) <= infection_prob, \"Infected\", \"Not infected\")) %>% ", 
"#   select(-infection_prob)", "# ", "# saveRDS(census, \"data/census.rds\")", 
"", "census <- readRDS(\"data/census.rds\")", "", "# GLOBAL PARAMS FOR EXERCISES", 
"true_infected_count <- sum(census$malaria_infection == \"Infected\")", 
"true_prevalence <- true_infected_count / 10000", "", "# get random sample", 
"# set.seed(5) # to ensure we get the same random sample for our tutorial calculations", 
"", "# set the sample size", "# sample_size <- 200", "", "# sample from the population", 
"# sample_data <- sampleFromPopulation(sample_size, census) ", 
"# saveRDS(sample_data, \"tutorials/data/sample_data.rds\")", 
"", "# sample_data <- readRDS(\"tutorials/data/sample_data.rds\")", 
"", "# Number of infected individuals in the sample", "# infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"# ", "# p_hat <- infected_count / sample_size", "# SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"Z <- 1.96", "# CI_lower <- p_hat - Z * SE", "# CI_upper <- p_hat + Z * SE"
), chunk_opts = list(label = "setup", include = FALSE)), setup = "set.seed(5) # to ensure we get the same random sample for our tutorial calculations\n\n# set the sample size\nsample_size <- 200\n\n# sample from the population\nsample_data <- sampleFromPopulation(sample_size, census) \n\n# Count number of infected individuals in the sample\ninfected_count <- sum(sample_data$malaria_infection == \"Infected\")\n\n# p_hat\np_hat <- infected_count/sample_size\n\n# Z\nZ <- 1.96\n\n# SE\nSE <- sqrt((p_hat * (1 - p_hat)) / sample_size)\n\n# CI\nCI_lower <- p_hat - Z * SE\nCI_upper <- p_hat + Z * SE", 
    chunks = list(list(label = "sample-seed-params", code = "set.seed(5) # to ensure we get the same random sample for our tutorial calculations\n\n# set the sample size\nsample_size <- 200\n\n# sample from the population\nsample_data <- sampleFromPopulation(sample_size, census) \n\n# Count number of infected individuals in the sample\ninfected_count <- sum(sample_data$malaria_infection == \"Infected\")\n\n# p_hat\np_hat <- infected_count/sample_size\n\n# Z\nZ <- 1.96\n\n# SE\nSE <- sqrt((p_hat * (1 - p_hat)) / sample_size)\n\n# CI\nCI_lower <- p_hat - Z * SE\nCI_upper <- p_hat + Z * SE", 
        opts = list(label = "\"sample-seed-params\""), engine = "r"), 
        list(label = "SE", code = "SE <- ", opts = list(label = "\"SE\"", 
            exercise = "TRUE", exercise.setup = "\"sample-seed-params\""), 
            engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = structure(c("# Standard error", 
    "SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", "SE"), chunk_opts = list(
        label = "SE-solution")), tests = NULL, options = list(
        eval = FALSE, echo = TRUE, results = "markup", tidy = FALSE, 
        tidy.opts = NULL, collapse = FALSE, prompt = FALSE, comment = NA, 
        highlight = FALSE, size = "normalsize", background = "#F7F7F7", 
        strip.white = TRUE, cache = 0, cache.path = "module1_sampling_interactive_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "module1_sampling_interactive_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = FALSE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, exercise.timelimit = 120, label = "SE", 
        exercise = TRUE, exercise.setup = "sample-seed-params", 
        code = "SE <- ", out.width.px = 624, out.height.px = 384, 
        params.src = "SE, exercise=TRUE, exercise.setup = \"sample-seed-params\"", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-ci-lower-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-ci-lower-code-editor`)), session)
output$`tutorial-exercise-ci-lower-output` <- renderUI({
  `tutorial-exercise-ci-lower-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "ci-lower", global_setup = structure(c("# options(repos = c(", 
"#   plasmogenepi = \"https://plasmogenepi.r-universe.dev\",", 
"#   CRAN = \"https://cloud.r-project.org\"", "# ))", "", "library(learnr)", 
"library(dplyr)", "library(ggplot2)", "library(knitr)", "# library(DRpower)", 
"", "knitr::opts_chunk$set(warning = FALSE,", "                      echo = FALSE)", 
"", "# needed for longer calculations (eg DRpower) note - in seconds", 
"tutorial_options(exercise.timelimit = 120)", "", "# FUNCTIONS", 
"sampleFromPopulation <- function(sample_size, census){", "  ss <- sample_size", 
"  sample_data <- census %>% sample_n(ss, replace = F) # sample without replacement ", 
"  ", "  return(sample_data)", "}", "", "compareSampleToPopulation <- function(sample, census){", 
"  comparison <- bind_rows(", "    census %>% mutate(group = \"Population\") %>% select(age, sex, malaria_infection, group),", 
"    sample %>% mutate(group = \"Sample\") %>% select(age, sex, malaria_infection, group))", 
"  ", "  return(comparison)", "}", "", "plotAgeSexDistribution <- function(comparison){", 
"  comparison %>% ", "  ggplot(aes(x = age, fill = sex)) +", 
"    geom_histogram(binwidth = 5, color = \"white\", boundary = 0) +", 
"    scale_fill_brewer(palette = \"Set2\") +", "    labs(title = \"Age and sex distribution\", x = \"Age (years)\", y = \"Count\") +", 
"    theme_minimal() +", "    facet_wrap(~group, scales = \"free_y\")", 
"}", "", "plotInfectedProportion <- function(comparison){", "  comparison %>% ", 
"    count(group, malaria_infection) %>% ", "    group_by(group) %>% ", 
"    mutate(proportion = n/sum(n)) %>% ", "    ungroup() %>% ", 
"    ggplot(aes(x = group, y = proportion, fill = malaria_infection)) +", 
"      geom_bar(stat = \"identity\") +", "      geom_text(aes(label = scales::percent(proportion, accuracy = 0.1)), ", 
"                color = \"white\",", "                position = position_stack(vjust = 0.5),", 
"                size = 4,", "                show.legend = F) +", 
"      scale_fill_brewer(palette = \"Set1\",", "                        name = NULL) +", 
"      scale_color_brewer(palette = \"Set1\") +", "      scale_y_continuous(labels = scales::percent) +", 
"      labs(title = \"Malaria infection status\", x = \"\", y = \"\") +", 
"      theme_minimal()", "}", "", "checkPrevalenceCI <- function(true_prevalence, CI_lower, CI_upper){", 
"  if(true_prevalence >= CI_lower & true_prevalence <= CI_upper){", 
"    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) falls within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "  else {", "    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) does not fall within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "}", "", "simulate_CI <- function(census, sample_size, true_prevalence) {", 
"  sample_data <- census %>% sample_n(sample_size, replace = F)", 
"  infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"  p_hat <- infected_count / sample_size", "  SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"  CI_lower <- p_hat - Z * SE", "  CI_upper <- p_hat + Z * SE", 
"  (true_prevalence >= CI_lower) & (true_prevalence <= CI_upper)", 
"}", "", "plotCISimulationResults <- function(results, n_simulations){", 
"  results_df <- data.frame(result = results) %>% ", "                mutate(result = case_when(result == FALSE ~ \"Not within 95%CI\",", 
"                                          result == TRUE ~ \"Within 95%CI\"))", 
"  ", "  results_df %>% ", "  count(result) %>% ", "  mutate(proportion = n/sum(n)) %>% ", 
"  ggplot(aes(x = \"\", y = proportion, fill = result)) +", "    geom_bar(stat = \"identity\",", 
"             position = \"fill\",", "             width = 0.5) +", 
"    geom_text(aes(label = scales::percent(proportion, accuracy = 0.1),", 
"                  color = result), ", "            position = position_fill(vjust = 0.9), ", 
"            size = 4,", "            show.legend = F) +", "    scale_fill_manual(values = c(\"Not within 95%CI\" = \"grey\", \"Within 95%CI\" = \"magenta4\"),", 
"                      name = NULL) +", "    scale_color_manual(values = c(\"Not within 95%CI\" = \"grey30\", \"Within 95%CI\" = \"white\"),", 
"                      name = NULL) +", "    scale_y_continuous(labels = scales::percent) +", 
"    labs(title = paste0(\"Simulation results (N=\", n_simulations, \" simulations)\"), x = \"\", y = \"\") +", 
"    coord_flip() +", "    theme_minimal() +", "    theme(axis.ticks.y = element_blank(), axis.text.y = element_blank())", 
"}", "", "# PRE-LOADED DATA", "", "# fake census data", "# N <- 10000", 
"# ", "# set.seed(1234)", "# ", "# census <- data.frame(", "#   id = 1:N,", 
"#   age = sample(0:80, N, replace = TRUE), # not really realistic, eg 'young population' but maybe OK for these purposes?", 
"#   sex = sample(c(\"Male\", \"Female\"), N, replace = TRUE) #,", 
"#   # malaria_infection = sample(c(\"Infected\", \"Not infected\"), N, replace = TRUE, prob = c(0.3, 0.7)", 
"# )", "# ", "# census <- census %>% ", "#   # infection probability higher in children", 
"#   mutate(infection_prob = case_when(age >=0 & age <= 14 ~ 0.60,", 
"#                                     age > 14 & age <=44 ~ 0.30,", 
"#                                     age > 44 ~ 0.10,", "#                                     TRUE ~ 0.25),", 
"#          malaria_infection = ifelse(runif(n()) <= infection_prob, \"Infected\", \"Not infected\")) %>% ", 
"#   select(-infection_prob)", "# ", "# saveRDS(census, \"data/census.rds\")", 
"", "census <- readRDS(\"data/census.rds\")", "", "# GLOBAL PARAMS FOR EXERCISES", 
"true_infected_count <- sum(census$malaria_infection == \"Infected\")", 
"true_prevalence <- true_infected_count / 10000", "", "# get random sample", 
"# set.seed(5) # to ensure we get the same random sample for our tutorial calculations", 
"", "# set the sample size", "# sample_size <- 200", "", "# sample from the population", 
"# sample_data <- sampleFromPopulation(sample_size, census) ", 
"# saveRDS(sample_data, \"tutorials/data/sample_data.rds\")", 
"", "# sample_data <- readRDS(\"tutorials/data/sample_data.rds\")", 
"", "# Number of infected individuals in the sample", "# infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"# ", "# p_hat <- infected_count / sample_size", "# SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"Z <- 1.96", "# CI_lower <- p_hat - Z * SE", "# CI_upper <- p_hat + Z * SE"
), chunk_opts = list(label = "setup", include = FALSE)), setup = "set.seed(5) # to ensure we get the same random sample for our tutorial calculations\n\n# set the sample size\nsample_size <- 200\n\n# sample from the population\nsample_data <- sampleFromPopulation(sample_size, census) \n\n# Count number of infected individuals in the sample\ninfected_count <- sum(sample_data$malaria_infection == \"Infected\")\n\n# p_hat\np_hat <- infected_count/sample_size\n\n# Z\nZ <- 1.96\n\n# SE\nSE <- sqrt((p_hat * (1 - p_hat)) / sample_size)\n\n# CI\nCI_lower <- p_hat - Z * SE\nCI_upper <- p_hat + Z * SE", 
    chunks = list(list(label = "sample-seed-params", code = "set.seed(5) # to ensure we get the same random sample for our tutorial calculations\n\n# set the sample size\nsample_size <- 200\n\n# sample from the population\nsample_data <- sampleFromPopulation(sample_size, census) \n\n# Count number of infected individuals in the sample\ninfected_count <- sum(sample_data$malaria_infection == \"Infected\")\n\n# p_hat\np_hat <- infected_count/sample_size\n\n# Z\nZ <- 1.96\n\n# SE\nSE <- sqrt((p_hat * (1 - p_hat)) / sample_size)\n\n# CI\nCI_lower <- p_hat - Z * SE\nCI_upper <- p_hat + Z * SE", 
        opts = list(label = "\"sample-seed-params\""), engine = "r"), 
        list(label = "ci-lower", code = "# Critical value for 95% confidence\nz_alpha <- 1.96\n\n# Lower bound\n", 
            opts = list(label = "\"ci-lower\"", exercise = "TRUE", 
                exercise.setup = "\"sample-seed-params\""), engine = "r")), 
    code_check = NULL, error_check = NULL, check = NULL, solution = structure(c("# Critical value for 95% confidence", 
    "z_alpha <- 1.96", "", "# Lower bound", "p_hat - z_alpha * SE"
    ), chunk_opts = list(label = "ci-lower-solution")), tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "module1_sampling_interactive_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "module1_sampling_interactive_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = FALSE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, exercise.timelimit = 120, label = "ci-lower", 
        exercise = TRUE, exercise.setup = "sample-seed-params", 
        code = c("# Critical value for 95% confidence", "z_alpha <- 1.96", 
        "", "# Lower bound", ""), out.width.px = 624, out.height.px = 384, 
        params.src = "ci-lower, exercise=TRUE, exercise.setup = \"sample-seed-params\"", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-ci-upper-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-ci-upper-code-editor`)), session)
output$`tutorial-exercise-ci-upper-output` <- renderUI({
  `tutorial-exercise-ci-upper-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "ci-upper", global_setup = structure(c("# options(repos = c(", 
"#   plasmogenepi = \"https://plasmogenepi.r-universe.dev\",", 
"#   CRAN = \"https://cloud.r-project.org\"", "# ))", "", "library(learnr)", 
"library(dplyr)", "library(ggplot2)", "library(knitr)", "# library(DRpower)", 
"", "knitr::opts_chunk$set(warning = FALSE,", "                      echo = FALSE)", 
"", "# needed for longer calculations (eg DRpower) note - in seconds", 
"tutorial_options(exercise.timelimit = 120)", "", "# FUNCTIONS", 
"sampleFromPopulation <- function(sample_size, census){", "  ss <- sample_size", 
"  sample_data <- census %>% sample_n(ss, replace = F) # sample without replacement ", 
"  ", "  return(sample_data)", "}", "", "compareSampleToPopulation <- function(sample, census){", 
"  comparison <- bind_rows(", "    census %>% mutate(group = \"Population\") %>% select(age, sex, malaria_infection, group),", 
"    sample %>% mutate(group = \"Sample\") %>% select(age, sex, malaria_infection, group))", 
"  ", "  return(comparison)", "}", "", "plotAgeSexDistribution <- function(comparison){", 
"  comparison %>% ", "  ggplot(aes(x = age, fill = sex)) +", 
"    geom_histogram(binwidth = 5, color = \"white\", boundary = 0) +", 
"    scale_fill_brewer(palette = \"Set2\") +", "    labs(title = \"Age and sex distribution\", x = \"Age (years)\", y = \"Count\") +", 
"    theme_minimal() +", "    facet_wrap(~group, scales = \"free_y\")", 
"}", "", "plotInfectedProportion <- function(comparison){", "  comparison %>% ", 
"    count(group, malaria_infection) %>% ", "    group_by(group) %>% ", 
"    mutate(proportion = n/sum(n)) %>% ", "    ungroup() %>% ", 
"    ggplot(aes(x = group, y = proportion, fill = malaria_infection)) +", 
"      geom_bar(stat = \"identity\") +", "      geom_text(aes(label = scales::percent(proportion, accuracy = 0.1)), ", 
"                color = \"white\",", "                position = position_stack(vjust = 0.5),", 
"                size = 4,", "                show.legend = F) +", 
"      scale_fill_brewer(palette = \"Set1\",", "                        name = NULL) +", 
"      scale_color_brewer(palette = \"Set1\") +", "      scale_y_continuous(labels = scales::percent) +", 
"      labs(title = \"Malaria infection status\", x = \"\", y = \"\") +", 
"      theme_minimal()", "}", "", "checkPrevalenceCI <- function(true_prevalence, CI_lower, CI_upper){", 
"  if(true_prevalence >= CI_lower & true_prevalence <= CI_upper){", 
"    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) falls within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "  else {", "    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) does not fall within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "}", "", "simulate_CI <- function(census, sample_size, true_prevalence) {", 
"  sample_data <- census %>% sample_n(sample_size, replace = F)", 
"  infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"  p_hat <- infected_count / sample_size", "  SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"  CI_lower <- p_hat - Z * SE", "  CI_upper <- p_hat + Z * SE", 
"  (true_prevalence >= CI_lower) & (true_prevalence <= CI_upper)", 
"}", "", "plotCISimulationResults <- function(results, n_simulations){", 
"  results_df <- data.frame(result = results) %>% ", "                mutate(result = case_when(result == FALSE ~ \"Not within 95%CI\",", 
"                                          result == TRUE ~ \"Within 95%CI\"))", 
"  ", "  results_df %>% ", "  count(result) %>% ", "  mutate(proportion = n/sum(n)) %>% ", 
"  ggplot(aes(x = \"\", y = proportion, fill = result)) +", "    geom_bar(stat = \"identity\",", 
"             position = \"fill\",", "             width = 0.5) +", 
"    geom_text(aes(label = scales::percent(proportion, accuracy = 0.1),", 
"                  color = result), ", "            position = position_fill(vjust = 0.9), ", 
"            size = 4,", "            show.legend = F) +", "    scale_fill_manual(values = c(\"Not within 95%CI\" = \"grey\", \"Within 95%CI\" = \"magenta4\"),", 
"                      name = NULL) +", "    scale_color_manual(values = c(\"Not within 95%CI\" = \"grey30\", \"Within 95%CI\" = \"white\"),", 
"                      name = NULL) +", "    scale_y_continuous(labels = scales::percent) +", 
"    labs(title = paste0(\"Simulation results (N=\", n_simulations, \" simulations)\"), x = \"\", y = \"\") +", 
"    coord_flip() +", "    theme_minimal() +", "    theme(axis.ticks.y = element_blank(), axis.text.y = element_blank())", 
"}", "", "# PRE-LOADED DATA", "", "# fake census data", "# N <- 10000", 
"# ", "# set.seed(1234)", "# ", "# census <- data.frame(", "#   id = 1:N,", 
"#   age = sample(0:80, N, replace = TRUE), # not really realistic, eg 'young population' but maybe OK for these purposes?", 
"#   sex = sample(c(\"Male\", \"Female\"), N, replace = TRUE) #,", 
"#   # malaria_infection = sample(c(\"Infected\", \"Not infected\"), N, replace = TRUE, prob = c(0.3, 0.7)", 
"# )", "# ", "# census <- census %>% ", "#   # infection probability higher in children", 
"#   mutate(infection_prob = case_when(age >=0 & age <= 14 ~ 0.60,", 
"#                                     age > 14 & age <=44 ~ 0.30,", 
"#                                     age > 44 ~ 0.10,", "#                                     TRUE ~ 0.25),", 
"#          malaria_infection = ifelse(runif(n()) <= infection_prob, \"Infected\", \"Not infected\")) %>% ", 
"#   select(-infection_prob)", "# ", "# saveRDS(census, \"data/census.rds\")", 
"", "census <- readRDS(\"data/census.rds\")", "", "# GLOBAL PARAMS FOR EXERCISES", 
"true_infected_count <- sum(census$malaria_infection == \"Infected\")", 
"true_prevalence <- true_infected_count / 10000", "", "# get random sample", 
"# set.seed(5) # to ensure we get the same random sample for our tutorial calculations", 
"", "# set the sample size", "# sample_size <- 200", "", "# sample from the population", 
"# sample_data <- sampleFromPopulation(sample_size, census) ", 
"# saveRDS(sample_data, \"tutorials/data/sample_data.rds\")", 
"", "# sample_data <- readRDS(\"tutorials/data/sample_data.rds\")", 
"", "# Number of infected individuals in the sample", "# infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"# ", "# p_hat <- infected_count / sample_size", "# SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"Z <- 1.96", "# CI_lower <- p_hat - Z * SE", "# CI_upper <- p_hat + Z * SE"
), chunk_opts = list(label = "setup", include = FALSE)), setup = "set.seed(5) # to ensure we get the same random sample for our tutorial calculations\n\n# set the sample size\nsample_size <- 200\n\n# sample from the population\nsample_data <- sampleFromPopulation(sample_size, census) \n\n# Count number of infected individuals in the sample\ninfected_count <- sum(sample_data$malaria_infection == \"Infected\")\n\n# p_hat\np_hat <- infected_count/sample_size\n\n# Z\nZ <- 1.96\n\n# SE\nSE <- sqrt((p_hat * (1 - p_hat)) / sample_size)\n\n# CI\nCI_lower <- p_hat - Z * SE\nCI_upper <- p_hat + Z * SE", 
    chunks = list(list(label = "sample-seed-params", code = "set.seed(5) # to ensure we get the same random sample for our tutorial calculations\n\n# set the sample size\nsample_size <- 200\n\n# sample from the population\nsample_data <- sampleFromPopulation(sample_size, census) \n\n# Count number of infected individuals in the sample\ninfected_count <- sum(sample_data$malaria_infection == \"Infected\")\n\n# p_hat\np_hat <- infected_count/sample_size\n\n# Z\nZ <- 1.96\n\n# SE\nSE <- sqrt((p_hat * (1 - p_hat)) / sample_size)\n\n# CI\nCI_lower <- p_hat - Z * SE\nCI_upper <- p_hat + Z * SE", 
        opts = list(label = "\"sample-seed-params\""), engine = "r"), 
        list(label = "ci-upper", code = "# Critical value for 95% confidence\nz_alpha <- 1.96\n\n# Upper bound\n", 
            opts = list(label = "\"ci-upper\"", exercise = "TRUE", 
                exercise.setup = "\"sample-seed-params\""), engine = "r")), 
    code_check = NULL, error_check = NULL, check = NULL, solution = structure(c("# Critical value for 95% confidence", 
    "z_alpha <- 1.96", "", "# Upper bound", "p_hat + z_alpha * SE"
    ), chunk_opts = list(label = "ci-upper-solution")), tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "module1_sampling_interactive_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "module1_sampling_interactive_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = FALSE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, exercise.timelimit = 120, label = "ci-upper", 
        exercise = TRUE, exercise.setup = "sample-seed-params", 
        code = c("# Critical value for 95% confidence", "z_alpha <- 1.96", 
        "", "# Upper bound", ""), out.width.px = 624, out.height.px = 384, 
        params.src = "ci-upper, exercise=TRUE, exercise.setup = \"sample-seed-params\"", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-ci-calculation-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-ci-calculation-code-editor`)), session)
output$`tutorial-exercise-ci-calculation-output` <- renderUI({
  `tutorial-exercise-ci-calculation-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "ci-calculation", global_setup = structure(c("# options(repos = c(", 
"#   plasmogenepi = \"https://plasmogenepi.r-universe.dev\",", 
"#   CRAN = \"https://cloud.r-project.org\"", "# ))", "", "library(learnr)", 
"library(dplyr)", "library(ggplot2)", "library(knitr)", "# library(DRpower)", 
"", "knitr::opts_chunk$set(warning = FALSE,", "                      echo = FALSE)", 
"", "# needed for longer calculations (eg DRpower) note - in seconds", 
"tutorial_options(exercise.timelimit = 120)", "", "# FUNCTIONS", 
"sampleFromPopulation <- function(sample_size, census){", "  ss <- sample_size", 
"  sample_data <- census %>% sample_n(ss, replace = F) # sample without replacement ", 
"  ", "  return(sample_data)", "}", "", "compareSampleToPopulation <- function(sample, census){", 
"  comparison <- bind_rows(", "    census %>% mutate(group = \"Population\") %>% select(age, sex, malaria_infection, group),", 
"    sample %>% mutate(group = \"Sample\") %>% select(age, sex, malaria_infection, group))", 
"  ", "  return(comparison)", "}", "", "plotAgeSexDistribution <- function(comparison){", 
"  comparison %>% ", "  ggplot(aes(x = age, fill = sex)) +", 
"    geom_histogram(binwidth = 5, color = \"white\", boundary = 0) +", 
"    scale_fill_brewer(palette = \"Set2\") +", "    labs(title = \"Age and sex distribution\", x = \"Age (years)\", y = \"Count\") +", 
"    theme_minimal() +", "    facet_wrap(~group, scales = \"free_y\")", 
"}", "", "plotInfectedProportion <- function(comparison){", "  comparison %>% ", 
"    count(group, malaria_infection) %>% ", "    group_by(group) %>% ", 
"    mutate(proportion = n/sum(n)) %>% ", "    ungroup() %>% ", 
"    ggplot(aes(x = group, y = proportion, fill = malaria_infection)) +", 
"      geom_bar(stat = \"identity\") +", "      geom_text(aes(label = scales::percent(proportion, accuracy = 0.1)), ", 
"                color = \"white\",", "                position = position_stack(vjust = 0.5),", 
"                size = 4,", "                show.legend = F) +", 
"      scale_fill_brewer(palette = \"Set1\",", "                        name = NULL) +", 
"      scale_color_brewer(palette = \"Set1\") +", "      scale_y_continuous(labels = scales::percent) +", 
"      labs(title = \"Malaria infection status\", x = \"\", y = \"\") +", 
"      theme_minimal()", "}", "", "checkPrevalenceCI <- function(true_prevalence, CI_lower, CI_upper){", 
"  if(true_prevalence >= CI_lower & true_prevalence <= CI_upper){", 
"    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) falls within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "  else {", "    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) does not fall within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "}", "", "simulate_CI <- function(census, sample_size, true_prevalence) {", 
"  sample_data <- census %>% sample_n(sample_size, replace = F)", 
"  infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"  p_hat <- infected_count / sample_size", "  SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"  CI_lower <- p_hat - Z * SE", "  CI_upper <- p_hat + Z * SE", 
"  (true_prevalence >= CI_lower) & (true_prevalence <= CI_upper)", 
"}", "", "plotCISimulationResults <- function(results, n_simulations){", 
"  results_df <- data.frame(result = results) %>% ", "                mutate(result = case_when(result == FALSE ~ \"Not within 95%CI\",", 
"                                          result == TRUE ~ \"Within 95%CI\"))", 
"  ", "  results_df %>% ", "  count(result) %>% ", "  mutate(proportion = n/sum(n)) %>% ", 
"  ggplot(aes(x = \"\", y = proportion, fill = result)) +", "    geom_bar(stat = \"identity\",", 
"             position = \"fill\",", "             width = 0.5) +", 
"    geom_text(aes(label = scales::percent(proportion, accuracy = 0.1),", 
"                  color = result), ", "            position = position_fill(vjust = 0.9), ", 
"            size = 4,", "            show.legend = F) +", "    scale_fill_manual(values = c(\"Not within 95%CI\" = \"grey\", \"Within 95%CI\" = \"magenta4\"),", 
"                      name = NULL) +", "    scale_color_manual(values = c(\"Not within 95%CI\" = \"grey30\", \"Within 95%CI\" = \"white\"),", 
"                      name = NULL) +", "    scale_y_continuous(labels = scales::percent) +", 
"    labs(title = paste0(\"Simulation results (N=\", n_simulations, \" simulations)\"), x = \"\", y = \"\") +", 
"    coord_flip() +", "    theme_minimal() +", "    theme(axis.ticks.y = element_blank(), axis.text.y = element_blank())", 
"}", "", "# PRE-LOADED DATA", "", "# fake census data", "# N <- 10000", 
"# ", "# set.seed(1234)", "# ", "# census <- data.frame(", "#   id = 1:N,", 
"#   age = sample(0:80, N, replace = TRUE), # not really realistic, eg 'young population' but maybe OK for these purposes?", 
"#   sex = sample(c(\"Male\", \"Female\"), N, replace = TRUE) #,", 
"#   # malaria_infection = sample(c(\"Infected\", \"Not infected\"), N, replace = TRUE, prob = c(0.3, 0.7)", 
"# )", "# ", "# census <- census %>% ", "#   # infection probability higher in children", 
"#   mutate(infection_prob = case_when(age >=0 & age <= 14 ~ 0.60,", 
"#                                     age > 14 & age <=44 ~ 0.30,", 
"#                                     age > 44 ~ 0.10,", "#                                     TRUE ~ 0.25),", 
"#          malaria_infection = ifelse(runif(n()) <= infection_prob, \"Infected\", \"Not infected\")) %>% ", 
"#   select(-infection_prob)", "# ", "# saveRDS(census, \"data/census.rds\")", 
"", "census <- readRDS(\"data/census.rds\")", "", "# GLOBAL PARAMS FOR EXERCISES", 
"true_infected_count <- sum(census$malaria_infection == \"Infected\")", 
"true_prevalence <- true_infected_count / 10000", "", "# get random sample", 
"# set.seed(5) # to ensure we get the same random sample for our tutorial calculations", 
"", "# set the sample size", "# sample_size <- 200", "", "# sample from the population", 
"# sample_data <- sampleFromPopulation(sample_size, census) ", 
"# saveRDS(sample_data, \"tutorials/data/sample_data.rds\")", 
"", "# sample_data <- readRDS(\"tutorials/data/sample_data.rds\")", 
"", "# Number of infected individuals in the sample", "# infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"# ", "# p_hat <- infected_count / sample_size", "# SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"Z <- 1.96", "# CI_lower <- p_hat - Z * SE", "# CI_upper <- p_hat + Z * SE"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "ci-calculation", code = "infected_count <- 69\nsample_size <- 200\nz_alpha <- 1.96\n\np_hat <- infected_count / sample_size\nSE <- sqrt((p_hat * (1 - p_hat)) / sample_size)\nCI_lower <- p_hat - z_alpha * SE\nCI_upper <- p_hat + z_alpha * SE\n\n# Print our values\np_hat\nCI_lower\nCI_upper", 
        opts = list(label = "\"ci-calculation\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = NULL, tests = NULL, options = list(
        eval = FALSE, echo = TRUE, results = "markup", tidy = FALSE, 
        tidy.opts = NULL, collapse = FALSE, prompt = FALSE, comment = NA, 
        highlight = FALSE, size = "normalsize", background = "#F7F7F7", 
        strip.white = TRUE, cache = 0, cache.path = "module1_sampling_interactive_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "module1_sampling_interactive_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = FALSE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, exercise.timelimit = 120, label = "ci-calculation", 
        exercise = TRUE, code = c("infected_count <- 69", "sample_size <- 200", 
        "z_alpha <- 1.96", "", "p_hat <- infected_count / sample_size", 
        "SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", "CI_lower <- p_hat - z_alpha * SE", 
        "CI_upper <- p_hat + z_alpha * SE", "", "# Print our values", 
        "p_hat", "CI_lower", "CI_upper"), out.width.px = 624, 
        out.height.px = 384, params.src = "ci-calculation, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz-ci-prev-1", 
    question = structure("Is our true prevalence within the 95%CI of 27.9-41.1%?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_393527e", 
        option = "Yes", value = "Yes", label = structure("Yes", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = structure("The true prevalence (26.78%) is not within the 95%CI of 27.9-41.1%", html = TRUE, class = c("html", 
        "character")), type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_c308bd1", 
        option = "No", value = "No", label = structure("No", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = structure("The true prevalence (26.78%) is not within the 95%CI of 27.9-41.1%. In the next exercise we are going to run some simulations to explore this further.", html = TRUE, class = c("html", 
        "character")), type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz-ci-prev-1-answer", question = "quiz-ci-prev-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 2052660463.04416, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-sim-ci-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-sim-ci-code-editor`)), session)
output$`tutorial-exercise-sim-ci-output` <- renderUI({
  `tutorial-exercise-sim-ci-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "sim-ci", global_setup = structure(c("# options(repos = c(", 
"#   plasmogenepi = \"https://plasmogenepi.r-universe.dev\",", 
"#   CRAN = \"https://cloud.r-project.org\"", "# ))", "", "library(learnr)", 
"library(dplyr)", "library(ggplot2)", "library(knitr)", "# library(DRpower)", 
"", "knitr::opts_chunk$set(warning = FALSE,", "                      echo = FALSE)", 
"", "# needed for longer calculations (eg DRpower) note - in seconds", 
"tutorial_options(exercise.timelimit = 120)", "", "# FUNCTIONS", 
"sampleFromPopulation <- function(sample_size, census){", "  ss <- sample_size", 
"  sample_data <- census %>% sample_n(ss, replace = F) # sample without replacement ", 
"  ", "  return(sample_data)", "}", "", "compareSampleToPopulation <- function(sample, census){", 
"  comparison <- bind_rows(", "    census %>% mutate(group = \"Population\") %>% select(age, sex, malaria_infection, group),", 
"    sample %>% mutate(group = \"Sample\") %>% select(age, sex, malaria_infection, group))", 
"  ", "  return(comparison)", "}", "", "plotAgeSexDistribution <- function(comparison){", 
"  comparison %>% ", "  ggplot(aes(x = age, fill = sex)) +", 
"    geom_histogram(binwidth = 5, color = \"white\", boundary = 0) +", 
"    scale_fill_brewer(palette = \"Set2\") +", "    labs(title = \"Age and sex distribution\", x = \"Age (years)\", y = \"Count\") +", 
"    theme_minimal() +", "    facet_wrap(~group, scales = \"free_y\")", 
"}", "", "plotInfectedProportion <- function(comparison){", "  comparison %>% ", 
"    count(group, malaria_infection) %>% ", "    group_by(group) %>% ", 
"    mutate(proportion = n/sum(n)) %>% ", "    ungroup() %>% ", 
"    ggplot(aes(x = group, y = proportion, fill = malaria_infection)) +", 
"      geom_bar(stat = \"identity\") +", "      geom_text(aes(label = scales::percent(proportion, accuracy = 0.1)), ", 
"                color = \"white\",", "                position = position_stack(vjust = 0.5),", 
"                size = 4,", "                show.legend = F) +", 
"      scale_fill_brewer(palette = \"Set1\",", "                        name = NULL) +", 
"      scale_color_brewer(palette = \"Set1\") +", "      scale_y_continuous(labels = scales::percent) +", 
"      labs(title = \"Malaria infection status\", x = \"\", y = \"\") +", 
"      theme_minimal()", "}", "", "checkPrevalenceCI <- function(true_prevalence, CI_lower, CI_upper){", 
"  if(true_prevalence >= CI_lower & true_prevalence <= CI_upper){", 
"    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) falls within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "  else {", "    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) does not fall within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "}", "", "simulate_CI <- function(census, sample_size, true_prevalence) {", 
"  sample_data <- census %>% sample_n(sample_size, replace = F)", 
"  infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"  p_hat <- infected_count / sample_size", "  SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"  CI_lower <- p_hat - Z * SE", "  CI_upper <- p_hat + Z * SE", 
"  (true_prevalence >= CI_lower) & (true_prevalence <= CI_upper)", 
"}", "", "plotCISimulationResults <- function(results, n_simulations){", 
"  results_df <- data.frame(result = results) %>% ", "                mutate(result = case_when(result == FALSE ~ \"Not within 95%CI\",", 
"                                          result == TRUE ~ \"Within 95%CI\"))", 
"  ", "  results_df %>% ", "  count(result) %>% ", "  mutate(proportion = n/sum(n)) %>% ", 
"  ggplot(aes(x = \"\", y = proportion, fill = result)) +", "    geom_bar(stat = \"identity\",", 
"             position = \"fill\",", "             width = 0.5) +", 
"    geom_text(aes(label = scales::percent(proportion, accuracy = 0.1),", 
"                  color = result), ", "            position = position_fill(vjust = 0.9), ", 
"            size = 4,", "            show.legend = F) +", "    scale_fill_manual(values = c(\"Not within 95%CI\" = \"grey\", \"Within 95%CI\" = \"magenta4\"),", 
"                      name = NULL) +", "    scale_color_manual(values = c(\"Not within 95%CI\" = \"grey30\", \"Within 95%CI\" = \"white\"),", 
"                      name = NULL) +", "    scale_y_continuous(labels = scales::percent) +", 
"    labs(title = paste0(\"Simulation results (N=\", n_simulations, \" simulations)\"), x = \"\", y = \"\") +", 
"    coord_flip() +", "    theme_minimal() +", "    theme(axis.ticks.y = element_blank(), axis.text.y = element_blank())", 
"}", "", "# PRE-LOADED DATA", "", "# fake census data", "# N <- 10000", 
"# ", "# set.seed(1234)", "# ", "# census <- data.frame(", "#   id = 1:N,", 
"#   age = sample(0:80, N, replace = TRUE), # not really realistic, eg 'young population' but maybe OK for these purposes?", 
"#   sex = sample(c(\"Male\", \"Female\"), N, replace = TRUE) #,", 
"#   # malaria_infection = sample(c(\"Infected\", \"Not infected\"), N, replace = TRUE, prob = c(0.3, 0.7)", 
"# )", "# ", "# census <- census %>% ", "#   # infection probability higher in children", 
"#   mutate(infection_prob = case_when(age >=0 & age <= 14 ~ 0.60,", 
"#                                     age > 14 & age <=44 ~ 0.30,", 
"#                                     age > 44 ~ 0.10,", "#                                     TRUE ~ 0.25),", 
"#          malaria_infection = ifelse(runif(n()) <= infection_prob, \"Infected\", \"Not infected\")) %>% ", 
"#   select(-infection_prob)", "# ", "# saveRDS(census, \"data/census.rds\")", 
"", "census <- readRDS(\"data/census.rds\")", "", "# GLOBAL PARAMS FOR EXERCISES", 
"true_infected_count <- sum(census$malaria_infection == \"Infected\")", 
"true_prevalence <- true_infected_count / 10000", "", "# get random sample", 
"# set.seed(5) # to ensure we get the same random sample for our tutorial calculations", 
"", "# set the sample size", "# sample_size <- 200", "", "# sample from the population", 
"# sample_data <- sampleFromPopulation(sample_size, census) ", 
"# saveRDS(sample_data, \"tutorials/data/sample_data.rds\")", 
"", "# sample_data <- readRDS(\"tutorials/data/sample_data.rds\")", 
"", "# Number of infected individuals in the sample", "# infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"# ", "# p_hat <- infected_count / sample_size", "# SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"Z <- 1.96", "# CI_lower <- p_hat - Z * SE", "# CI_upper <- p_hat + Z * SE"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "sim-ci", code = "n_simulations <- 1000\nsample_size <- 200\n\nresults <- replicate(n_simulations, simulate_CI(census, sample_size, true_prevalence))\n\nplotCISimulationResults(results, n_simulations)", 
        opts = list(label = "\"sim-ci\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = NULL, tests = NULL, options = list(
        eval = FALSE, echo = TRUE, results = "markup", tidy = FALSE, 
        tidy.opts = NULL, collapse = FALSE, prompt = FALSE, comment = NA, 
        highlight = FALSE, size = "normalsize", background = "#F7F7F7", 
        strip.white = TRUE, cache = 0, cache.path = "module1_sampling_interactive_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "module1_sampling_interactive_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = FALSE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, exercise.timelimit = 120, label = "sim-ci", 
        exercise = TRUE, code = c("n_simulations <- 1000", "sample_size <- 200", 
        "", "results <- replicate(n_simulations, simulate_CI(census, sample_size, true_prevalence))", 
        "", "plotCISimulationResults(results, n_simulations)"
        ), out.width.px = 624, out.height.px = 384, params.src = "sim-ci, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz-sim-ci-1", 
    question = structure("In the context of confidence intervals, what does a 95% confidence level mean?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_2bc4e5f", 
        option = "It means that 95% of the time, the sample estimate will be equal to the true population parameter.", 
        value = "It means that 95% of the time, the sample estimate will be equal to the true population parameter.", 
        label = structure("It means that 95% of the time, the sample estimate will be equal to the true population parameter.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_9c31f20", 
        option = "It means that 95% of the time the true population parameter will lie within this interval.", 
        value = "It means that 95% of the time the true population parameter will lie within this interval.", 
        label = structure("It means that 95% of the time the true population parameter will lie within this interval.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_147a479", 
        option = "It means that 95% of the data points lie within the confidence interval.", 
        value = "It means that 95% of the data points lie within the confidence interval.", 
        label = structure("It means that 95% of the data points lie within the confidence interval.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_c2f0a1d", 
        option = "If we take 100 samples, exactly 95 of them will have intervals containing the true parameter.", 
        value = "If we take 100 samples, exactly 95 of them will have intervals containing the true parameter.", 
        label = structure("If we take 100 samples, exactly 95 of them will have intervals containing the true parameter.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct! A 95% confidence level means we are 95% confident that the true population parameter lies within the interval calculated from our sample.", html = TRUE, class = c("html", 
    "character")), try_again = structure("Not quite. Remember the simulation exercise we undertook above.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Not quite. Remember the simulation exercise we undertook above.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz-sim-ci-1-answer", question = "quiz-sim-ci-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 922776305.070299, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz-sim-ci-2", 
    question = structure("After running the simulation of 1,000 samples, approximately how many of the confidence intervals would you expect to contain the true population prevalence?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_d3ce198", 
        option = "About 50 of them.", value = "About 50 of them.", 
        label = structure("About 50 of them.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_6f3188a", 
        option = "About 950 of them.", value = "About 950 of them.", 
        label = structure("About 950 of them.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_7d13c7b", 
        option = "All 1,000 of them.", value = "All 1,000 of them.", 
        label = structure("All 1,000 of them.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_e34b3ca", 
        option = "None of them.", value = "None of them.", label = structure("None of them.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("That’s right! With a 95% confidence interval, we’d expect about 950 out of 1,000 intervals to contain the true prevalence.", html = TRUE, class = c("html", 
    "character")), try_again = structure("Consider the definition of a 95% confidence interval—it suggests that approximately 95% of intervals contain the true parameter.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Consider the definition of a 95% confidence interval—it suggests that approximately 95% of intervals contain the true parameter.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz-sim-ci-2-answer", question = "quiz-sim-ci-2"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1630365659.2408, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz-sim-ci-3", 
    question = structure("If the true prevalence falls outside the confidence interval calculated from our sample, does it mean our sampling method is biased?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_cdbac54", 
        option = "Yes, because the confidence interval should always contain the true parameter.", 
        value = "Yes, because the confidence interval should always contain the true parameter.", 
        label = structure("Yes, because the confidence interval should always contain the true parameter.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_29d6cee", 
        option = "No, because even with a correct method, there's still a chance the confidence interval won't contain the true parameter.", 
        value = "No, because even with a correct method, there's still a chance the confidence interval won't contain the true parameter.", 
        label = structure("No, because even with a correct method, there’s still a chance the confidence interval won’t contain the true parameter.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_459f2d8", 
        option = "Yes, because our sample size was too small.", 
        value = "Yes, because our sample size was too small.", 
        label = structure("Yes, because our sample size was too small.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_9781012", 
        option = "No, because the confidence interval is only a rough estimate.", 
        value = "No, because the confidence interval is only a rough estimate.", 
        label = structure("No, because the confidence interval is only a rough estimate.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Exactly! Even with an unbiased sampling method, there’s a 5% chance the true parameter won’t be within the 95% confidence interval.", html = TRUE, class = c("html", 
    "character")), try_again = structure("Not quite. Remember that confidence intervals are calculated with a certain level of confidence, and there’s always a chance the true parameter lies outside the interval.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Not quite. Remember that confidence intervals are calculated with a certain level of confidence, and there’s always a chance the true parameter lies outside the interval.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz-sim-ci-3-answer", question = "quiz-sim-ci-3"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1412172909.34241, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-sampling-500-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-sampling-500-code-editor`)), session)
output$`tutorial-exercise-sampling-500-output` <- renderUI({
  `tutorial-exercise-sampling-500-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "sampling-500", global_setup = structure(c("# options(repos = c(", 
"#   plasmogenepi = \"https://plasmogenepi.r-universe.dev\",", 
"#   CRAN = \"https://cloud.r-project.org\"", "# ))", "", "library(learnr)", 
"library(dplyr)", "library(ggplot2)", "library(knitr)", "# library(DRpower)", 
"", "knitr::opts_chunk$set(warning = FALSE,", "                      echo = FALSE)", 
"", "# needed for longer calculations (eg DRpower) note - in seconds", 
"tutorial_options(exercise.timelimit = 120)", "", "# FUNCTIONS", 
"sampleFromPopulation <- function(sample_size, census){", "  ss <- sample_size", 
"  sample_data <- census %>% sample_n(ss, replace = F) # sample without replacement ", 
"  ", "  return(sample_data)", "}", "", "compareSampleToPopulation <- function(sample, census){", 
"  comparison <- bind_rows(", "    census %>% mutate(group = \"Population\") %>% select(age, sex, malaria_infection, group),", 
"    sample %>% mutate(group = \"Sample\") %>% select(age, sex, malaria_infection, group))", 
"  ", "  return(comparison)", "}", "", "plotAgeSexDistribution <- function(comparison){", 
"  comparison %>% ", "  ggplot(aes(x = age, fill = sex)) +", 
"    geom_histogram(binwidth = 5, color = \"white\", boundary = 0) +", 
"    scale_fill_brewer(palette = \"Set2\") +", "    labs(title = \"Age and sex distribution\", x = \"Age (years)\", y = \"Count\") +", 
"    theme_minimal() +", "    facet_wrap(~group, scales = \"free_y\")", 
"}", "", "plotInfectedProportion <- function(comparison){", "  comparison %>% ", 
"    count(group, malaria_infection) %>% ", "    group_by(group) %>% ", 
"    mutate(proportion = n/sum(n)) %>% ", "    ungroup() %>% ", 
"    ggplot(aes(x = group, y = proportion, fill = malaria_infection)) +", 
"      geom_bar(stat = \"identity\") +", "      geom_text(aes(label = scales::percent(proportion, accuracy = 0.1)), ", 
"                color = \"white\",", "                position = position_stack(vjust = 0.5),", 
"                size = 4,", "                show.legend = F) +", 
"      scale_fill_brewer(palette = \"Set1\",", "                        name = NULL) +", 
"      scale_color_brewer(palette = \"Set1\") +", "      scale_y_continuous(labels = scales::percent) +", 
"      labs(title = \"Malaria infection status\", x = \"\", y = \"\") +", 
"      theme_minimal()", "}", "", "checkPrevalenceCI <- function(true_prevalence, CI_lower, CI_upper){", 
"  if(true_prevalence >= CI_lower & true_prevalence <= CI_upper){", 
"    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) falls within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "  else {", "    print(paste0(\"The true prevalence (\", round(true_prevalence*100, 2),\"%) does not fall within the 95%CI (\", round(CI_lower*100, 2),\"- \", round(CI_upper*100, 2), \"%)\"))", 
"  }", "}", "", "simulate_CI <- function(census, sample_size, true_prevalence) {", 
"  sample_data <- census %>% sample_n(sample_size, replace = F)", 
"  infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"  p_hat <- infected_count / sample_size", "  SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"  CI_lower <- p_hat - Z * SE", "  CI_upper <- p_hat + Z * SE", 
"  (true_prevalence >= CI_lower) & (true_prevalence <= CI_upper)", 
"}", "", "plotCISimulationResults <- function(results, n_simulations){", 
"  results_df <- data.frame(result = results) %>% ", "                mutate(result = case_when(result == FALSE ~ \"Not within 95%CI\",", 
"                                          result == TRUE ~ \"Within 95%CI\"))", 
"  ", "  results_df %>% ", "  count(result) %>% ", "  mutate(proportion = n/sum(n)) %>% ", 
"  ggplot(aes(x = \"\", y = proportion, fill = result)) +", "    geom_bar(stat = \"identity\",", 
"             position = \"fill\",", "             width = 0.5) +", 
"    geom_text(aes(label = scales::percent(proportion, accuracy = 0.1),", 
"                  color = result), ", "            position = position_fill(vjust = 0.9), ", 
"            size = 4,", "            show.legend = F) +", "    scale_fill_manual(values = c(\"Not within 95%CI\" = \"grey\", \"Within 95%CI\" = \"magenta4\"),", 
"                      name = NULL) +", "    scale_color_manual(values = c(\"Not within 95%CI\" = \"grey30\", \"Within 95%CI\" = \"white\"),", 
"                      name = NULL) +", "    scale_y_continuous(labels = scales::percent) +", 
"    labs(title = paste0(\"Simulation results (N=\", n_simulations, \" simulations)\"), x = \"\", y = \"\") +", 
"    coord_flip() +", "    theme_minimal() +", "    theme(axis.ticks.y = element_blank(), axis.text.y = element_blank())", 
"}", "", "# PRE-LOADED DATA", "", "# fake census data", "# N <- 10000", 
"# ", "# set.seed(1234)", "# ", "# census <- data.frame(", "#   id = 1:N,", 
"#   age = sample(0:80, N, replace = TRUE), # not really realistic, eg 'young population' but maybe OK for these purposes?", 
"#   sex = sample(c(\"Male\", \"Female\"), N, replace = TRUE) #,", 
"#   # malaria_infection = sample(c(\"Infected\", \"Not infected\"), N, replace = TRUE, prob = c(0.3, 0.7)", 
"# )", "# ", "# census <- census %>% ", "#   # infection probability higher in children", 
"#   mutate(infection_prob = case_when(age >=0 & age <= 14 ~ 0.60,", 
"#                                     age > 14 & age <=44 ~ 0.30,", 
"#                                     age > 44 ~ 0.10,", "#                                     TRUE ~ 0.25),", 
"#          malaria_infection = ifelse(runif(n()) <= infection_prob, \"Infected\", \"Not infected\")) %>% ", 
"#   select(-infection_prob)", "# ", "# saveRDS(census, \"data/census.rds\")", 
"", "census <- readRDS(\"data/census.rds\")", "", "# GLOBAL PARAMS FOR EXERCISES", 
"true_infected_count <- sum(census$malaria_infection == \"Infected\")", 
"true_prevalence <- true_infected_count / 10000", "", "# get random sample", 
"# set.seed(5) # to ensure we get the same random sample for our tutorial calculations", 
"", "# set the sample size", "# sample_size <- 200", "", "# sample from the population", 
"# sample_data <- sampleFromPopulation(sample_size, census) ", 
"# saveRDS(sample_data, \"tutorials/data/sample_data.rds\")", 
"", "# sample_data <- readRDS(\"tutorials/data/sample_data.rds\")", 
"", "# Number of infected individuals in the sample", "# infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
"# ", "# p_hat <- infected_count / sample_size", "# SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
"Z <- 1.96", "# CI_lower <- p_hat - Z * SE", "# CI_upper <- p_hat + Z * SE"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "sampling-500", code = "sample_size <- 500", 
        opts = list(label = "\"sampling-500\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = structure(c("sample_size <- 500", 
    "sample_data <- sampleFromPopulation(sample_size, census)", 
    "comparison <- compareSampleToPopulation(sample_data, census)", 
    "", "plotAgeSexDistribution(comparison)", "plotInfectedProportion(comparison)", 
    "", "infected_count <- sum(sample_data$malaria_infection == \"Infected\")", 
    "", "p_hat <- infected_count / sample_size", "SE <- sqrt((p_hat * (1 - p_hat)) / sample_size)", 
    "CI_lower <- p_hat - Z * SE", "CI_upper <- p_hat + Z * SE", 
    "", "checkPrevalenceCI(true_prevalence, CI_lower, CI_upper)", 
    "", "n_simulations <- 1000", "results <- replicate(n_simulations, simulate_CI(census, sample_size, true_prevalence))", 
    "plotCISimulationResults(results, n_simulations)"), chunk_opts = list(
        label = "sampling-500-solution")), tests = NULL, options = list(
        eval = FALSE, echo = TRUE, results = "markup", tidy = FALSE, 
        tidy.opts = NULL, collapse = FALSE, prompt = FALSE, comment = NA, 
        highlight = FALSE, size = "normalsize", background = "#F7F7F7", 
        strip.white = TRUE, cache = 0, cache.path = "module1_sampling_interactive_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "module1_sampling_interactive_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = FALSE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, exercise.timelimit = 120, label = "sampling-500", 
        exercise = TRUE, code = "sample_size <- 500", out.width.px = 624, 
        out.height.px = 384, params.src = "sampling-500, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
</p>
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["header-attrs"]},{"type":"character","attributes":{},"value":["2.27"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pandoc"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["header-attrs.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.27"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/cerulean.min.css"]},{"type":"character","attributes":{},"value":["<style>h1 {font-size: 34px;}\n       h1.title {font-size: 38px;}\n       h2 {font-size: 30px;}\n       h3 {font-size: 24px;}\n       h4 {font-size: 18px;}\n       h5 {font-size: 16px;}\n       h6 {font-size: 12px;}\n       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}\n       pre:not([class]) { background-color: white }<\/style>"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.27"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["pagedtable"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pagedtable-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/pagedtable.js"]},{"type":"character","attributes":{},"value":["css/pagedtable.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.27"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["textmate.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.27"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.11.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["i18n"]},{"type":"character","attributes":{},"value":["21.6.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/i18n"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["i18next.min.js","tutorial-i18n-init.js"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["<script id=\"i18n-cstm-trns\" type=\"application/json\">{\"language\":\"en\",\"resources\":{\"en\":{\"translation\":{\"button\":{\"runcode\":\"Run Code\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Hint\",\"hint_plural\":\"Hints\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Next Hint\",\"hintprev\":\"Previous Hint\",\"solution\":\"Solution\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copy to Clipboard\",\"startover\":\"Start Over\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continue\",\"submitanswer\":\"Submit Answer\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Previous Topic\",\"nexttopic\":\"Next Topic\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Try Again\"},\"text\":{\"startover\":\"Start Over\",\"areyousure\":\"Are you sure you want to start over? (all exercise progress will be reset)\",\"youmustcomplete\":\"You must complete the\",\"exercise\":\"exercise\",\"exercise_plural\":\"exercises\",\"inthissection\":\"in this section before continuing.\",\"code\":\"Code\",\"enginecap\":\"{{engine}} $t(text.code)\",\"quiz\":\"Quiz\",\"blank\":\"blank\",\"blank_plural\":\"blanks\",\"exercisecontainsblank\":\"This exercise contains {{count}} $t(text.blank).\",\"pleasereplaceblank\":\"Please replace {{blank}} with valid code.\",\"unparsable\":\"It looks like this might not be valid R code. R cannot determine how to turn your text into a complete command. You may have forgotten to fill in a blank, to remove an underscore, to include a comma between arguments, or to close an opening <code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code> or <code>{<\\/code> with a matching <code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code> or <code>}<\\/code>.\\n\",\"unparsablequotes\":\"<p>It looks like your R code contains specially formatted quotation marks or &quot;curly&quot; quotes (<code>{{character}}<\\/code>) around character strings, making your code invalid. R requires character values to be contained in straight quotation marks (<code>&quot;<\\/code> or <code>'<\\/code>).<\\/p> {{code}} <p>Don't worry, this is a common source of errors when you copy code from another app that applies its own formatting to text. You can try replacing the code on that line with the following. There may be other places that need to be fixed, too.<\\/p> {{suggestion}}\\n\",\"unparsableunicode\":\"<p>It looks like your R code contains an unexpected special character (<code>{{character}}<\\/code>) that makes your code invalid.<\\/p> {{code}} <p>Sometimes your code may contain a special character that looks like a regular character, especially if you copy and paste the code from another app. Try deleting the special character from your code and retyping it manually.<\\/p>\\n\",\"unparsableunicodesuggestion\":\"<p>It looks like your R code contains an unexpected special character (<code>{{character}}<\\/code>) that makes your code invalid.<\\/p> {{code}} <p>Sometimes your code may contain a special character that looks like a regular character, especially if you copy and paste the code from another app. You can try replacing the code on that line with the following. There may be other places that need to be fixed, too.<\\/p> {{suggestion}}\\n\",\"and\":\"and\",\"or\":\"or\",\"listcomma\":\", \",\"oxfordcomma\":\",\"}}},\"fr\":{\"translation\":{\"button\":{\"runcode\":\"Lancer le Code\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Indication\",\"hint_plural\":\"Indications\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Indication Suivante\",\"hintprev\":\"Indication Précédente\",\"solution\":\"Solution\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copier dans le Presse-papier\",\"startover\":\"Recommencer\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continuer\",\"submitanswer\":\"Soumettre\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Chapitre Précédent\",\"nexttopic\":\"Chapitre Suivant\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Réessayer\"},\"text\":{\"startover\":\"Recommencer\",\"areyousure\":\"Êtes-vous certains de vouloir recommencer? (La progression sera remise à zéro)\",\"youmustcomplete\":\"Vous devez d'abord compléter\",\"exercise\":\"l'exercice\",\"exercise_plural\":\"des exercices\",\"inthissection\":\"de cette section avec de continuer.\",\"code\":\"Code\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\",\"and\":\"et\",\"or\":\"ou\",\"oxfordcomma\":\"\"}}},\"es\":{\"translation\":{\"button\":{\"runcode\":\"Ejecutar código\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Pista\",\"hint_plural\":\"Pistas\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Siguiente pista\",\"hintprev\":\"Pista anterior\",\"solution\":\"Solución\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copiar al portapapeles\",\"startover\":\"Reiniciar\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continuar\",\"submitanswer\":\"Enviar respuesta\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Tema anterior\",\"nexttopic\":\"Tema siguiente\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Volver a intentar\"},\"text\":{\"startover\":\"Reiniciar\",\"areyousure\":\"¿De verdad quieres empezar de nuevo? (todo el progreso del ejercicio se perderá)\",\"youmustcomplete\":\"Debes completar\",\"exercise\":\"el ejercicio\",\"exercise_plural\":\"los ejercicios\",\"inthissection\":\"en esta sección antes de continuar.\",\"code\":\"Código\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Cuestionario\",\"and\":\"y\",\"or\":\"o\",\"oxfordcomma\":\"\"}}},\"pt\":{\"translation\":{\"button\":{\"runcode\":\"Executar código\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Dica\",\"hint_plural\":\"Dicas\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Próxima dica\",\"hintprev\":\"Dica anterior\",\"solution\":\"Solução\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copiar para a área de transferência\",\"startover\":\"Reiniciar\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continuar\",\"submitanswer\":\"Enviar resposta\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Tópico anterior\",\"nexttopic\":\"Próximo tópico\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Tentar novamente\"},\"text\":{\"startover\":\"Reiniciar\",\"areyousure\":\"Tem certeza que deseja começar novamente? (todo o progresso feito será perdido)\",\"youmustcomplete\":\"Você deve completar\",\"exercise\":\"o exercício\",\"exercise_plural\":\"os exercícios\",\"inthissection\":\"nesta seção antes de continuar.\",\"code\":\"Código\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\",\"and\":\"e\",\"or\":\"ou\",\"oxfordcomma\":\"\"}}},\"tr\":{\"translation\":{\"button\":{\"runcode\":\"Çalıştırma Kodu\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Ipucu\",\"hint_plural\":\"İpuçları\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Sonraki İpucu\",\"hintprev\":\"Önceki İpucu\",\"solution\":\"Çözüm\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Pano'ya Kopyala\",\"startover\":\"Baştan Başlamak\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Devam et\",\"submitanswer\":\"Cevabı onayla\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Önceki Konu\",\"nexttopic\":\"Sonraki Konu\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Tekrar Deneyin\"},\"text\":{\"startover\":\"Baştan Başlamak\",\"areyousure\":\"Baştan başlamak istediğinizden emin misiniz? (tüm egzersiz ilerlemesi kaybolacak)\",\"youmustcomplete\":\"Tamamlamalısın\",\"exercise\":\"egzersiz\",\"exercise_plural\":\"egzersizler\",\"inthissection\":\"devam etmeden önce bu bölümde\",\"code\":\"Kod\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Sınav\",\"oxfordcomma\":\"\"}}},\"emo\":{\"translation\":{\"button\":{\"runcode\":\"🏃\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"💡\",\"hint_plural\":\"$t(button.hint)\",\"hinttitle\":\"$t(button.hint)\",\"solution\":\"🎯\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"📋\",\"startover\":\"⏮\",\"startovertitle\":\"Start Over\",\"continue\":\"✅\",\"submitanswer\":\"🆗\",\"submitanswertitle\":\"Submit Answer\",\"previoustopic\":\"⬅\",\"nexttopic\":\"➡\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"🔁\"},\"text\":{\"startover\":\"⏮\",\"areyousure\":\"🤔\",\"youmustcomplete\":\"⚠️ 👉 🧑‍💻\",\"exercise\":\"\",\"exercise_plural\":\"\",\"inthissection\":\"\",\"code\":\"💻\",\"enginecap\":\"$t(text.code) {{engine}}\",\"oxfordcomma\":\"\"}}},\"eu\":{\"translation\":{\"button\":{\"runcode\":\"Kodea egikaritu\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Laguntza\",\"hint_plural\":\"Laguntza\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Aurreko laguntza\",\"hintprev\":\"Hurrengo laguntza\",\"solution\":\"Ebazpena\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Arbelean kopiatu\",\"startover\":\"Berrabiarazi\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Jarraitu\",\"submitanswer\":\"Erantzuna bidali\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Aurreko atala\",\"nexttopic\":\"Hurrengo atala\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Berriro saiatu\"},\"text\":{\"startover\":\"Berrabiarazi\",\"areyousure\":\"Berriro hasi nahi duzu? (egindako lana galdu egingo da)\",\"youmustcomplete\":\"Aurrera egin baino lehen atal honetako\",\"exercise\":\"ariketa egin behar duzu.\",\"exercise_plural\":\"ariketak egin behar dituzu.\",\"inthissection\":\"\",\"code\":\"Kodea\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Galdetegia\",\"oxfordcomma\":\"\"}}},\"de\":{\"translation\":{\"button\":{\"runcode\":\"Code ausführen\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Tipp\",\"hint_plural\":\"Tipps\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Nächster Tipp\",\"hintprev\":\"Vorheriger Tipp\",\"solution\":\"Lösung\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"In die Zwischenablage kopieren\",\"startover\":\"Neustart\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Weiter\",\"submitanswer\":\"Antwort einreichen\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Vorheriges Kapitel\",\"nexttopic\":\"Nächstes Kapitel\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Nochmal versuchen\"},\"text\":{\"startover\":\"Neustart\",\"areyousure\":\"Bist du sicher, dass du neustarten willst? (der gesamte Lernfortschritt wird gelöscht)\",\"youmustcomplete\":\"Vervollstädinge\",\"exercise\":\"die Übung\",\"exercise_plural\":\"die Übungen\",\"inthissection\":\"in diesem Kapitel, bevor du fortfährst.\",\"code\":\"Code\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\",\"blank\":\"Lücke\",\"blank_plural\":\"Lücken\",\"pleasereplaceblank\":\"Bitte ersetze {{blank}} mit gültigem Code.\",\"unparsable\":\"Dies scheint kein gültiger R Code zu sein. R kann deinen Text nicht in einen gültigen Befehl übersetzen. Du hast vielleicht vergessen, die Lücke zu füllen, einen Unterstrich zu entfernen, ein Komma zwischen Argumente zu setzen oder ein eröffnendes <code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code> oder <code>{<\\/code> mit einem zugehörigen <code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code> oder <code>}<\\/code> zu schließen.\\n\",\"and\":\"und\",\"or\":\"oder\",\"listcomma\":\", \",\"oxfordcomma\":\",\"}}},\"ko\":{\"translation\":{\"button\":{\"runcode\":\"코드 실행\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"힌트\",\"hint_plural\":\"힌트들\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"다음 힌트\",\"hintprev\":\"이전 힌트\",\"solution\":\"솔루션\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"클립보드에 복사\",\"startover\":\"재학습\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"다음 학습으로\",\"submitanswer\":\"정답 제출\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"이전 토픽\",\"nexttopic\":\"다음 토픽\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"재시도\"},\"text\":{\"startover\":\"재학습\",\"areyousure\":\"다시 시작 하시겠습니까? (모든 예제의 진행 정보가 재설정됩니다)\",\"youmustcomplete\":\"당신은 완료해야 합니다\",\"exercise\":\"연습문제\",\"exercise_plural\":\"연습문제들\",\"inthissection\":\"이 섹션을 실행하기 전에\",\"code\":\"코드\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"퀴즈\",\"blank\":\"공백\",\"blank_plural\":\"공백들\",\"exercisecontainsblank\":\"이 연습문제에는 {{count}}개의 $t(text.blank)이 포함되어 있습니다.\",\"pleasereplaceblank\":\"{{blank}}를 유효한 코드로 바꾸십시오.\",\"unparsable\":\"이것은 유효한 R 코드가 아닐 수 있습니다. R은 텍스트를 완전한 명령으로 변환하는 방법을 결정할 수 없습니다. 당신은 공백이나 밑줄을 대체하여 채우기, 인수를 컴마로 구분하기, 또는 <code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code> , <code>{<\\/code>로 시작하는 구문을 닫는 <code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code>, <code>}<\\/code>을 잊었을 수도 있습니다.\\n\",\"and\":\"그리고\",\"or\":\"혹은\",\"listcomma\":\", \",\"oxfordcomma\":\"\"}}},\"zh\":{\"translation\":{\"button\":{\"runcode\":\"运行代码\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"提示\",\"hint_plural\":\"提示\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"下一个提示\",\"hintprev\":\"上一个提示\",\"solution\":\"答案\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"复制到剪切板\",\"startover\":\"重新开始\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"继续\",\"submitanswer\":\"提交答案\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"上一专题\",\"nexttopic\":\"下一专题\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"再试一次\"},\"text\":{\"startover\":\"重置\",\"areyousure\":\"你确定要重新开始吗? (所有当前进度将被重置)\",\"youmustcomplete\":\"你必须完成\",\"exercise\":\"练习\",\"exercise_plural\":\"练习\",\"inthissection\":\"在进行本节之前\",\"code\":\"代码\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"测试\",\"blank\":\"空\",\"blank_plural\":\"空\",\"exercisecontainsblank\":\"本练习包含{{count}}个$t(text.blank)\",\"pleasereplaceblank\":\"请在{{blank}}内填写恰当的代码\",\"unparsable\":\"这似乎不是有效的R代码。 R不知道如何将您的文本转换为完整的命令。 您是否忘了填空，忘了删除下划线，忘了在参数之间包含逗号，或者是忘了用<code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code>,<code>}<\\/code>来封闭<code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code>。 or <code>{<\\/code>。\\n\",\"unparsablequotes\":\"<p>您的R代码中似乎含有特殊格式的引号，或者弯引号(<code>{{character}}<\\/code>) 在字符串前后，在R中字符串应该被直引号(<code>&quot;<\\/code> 或者 <code>'<\\/code>)包裹。<\\/p> {{code}} <p>别担心，该错误经常在复制粘贴包含格式的代码时遇到， 您可以尝试将该行中的代码替换为以下代码，也许还有其他地方需要修改。<\\/p> {{suggestion}}\\n\",\"unparsableunicode\":\"<p>您的代码中似乎包含有异常字符(<code>{{character}}<\\/code>),导致代码无效。<\\/p> {{code}} <p>有时候你的代码可能含有看似正常字符的特殊字符，特别是当你复制粘贴其他来源代码的时候。 请试着删除这些特殊字符,重新输入<\\/p>\\n\",\"unparsableunicodesuggestion\":\"<p>您的代码中似乎包含有异常字符(<code>{{character}}<\\/code>),导致代码无效。<\\/p> {{code}} <p>有时候你的代码可能含有看似正常字符的特殊字符，特别是当你复制粘贴其他来源代码的时候。 请试着删除这些特殊字符,重新输入<\\/p>\\n\",\"and\":\"且\",\"or\":\"或\",\"listcomma\":\",\",\"oxfordcomma\":\",\"}}},\"pl\":{\"translation\":{\"button\":{\"runcode\":\"Uruchom kod\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Podpowiedź\",\"hint_plural\":\"Podpowiedzi\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Następna podpowiedź\",\"hintprev\":\"Poprzednia podpowiedź\",\"solution\":\"Rozwiązanie\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Kopiuj do schowka\",\"startover\":\"Zacznij od początku\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Kontynuuj\",\"submitanswer\":\"Wyślij\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Poprzednia sekcja\",\"nexttopic\":\"Następna sekcja\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Spróbuj ponownie\"},\"text\":{\"startover\":\"Zacznij od początku\",\"areyousure\":\"Czy na pewno chcesz zacząć od początku? (cały postęp w zadaniu zostanie utracony)\",\"youmustcomplete\":\"Musisz ukończyć\",\"exercise\":\"ćwiczenie\",\"exercise_plural\":\"ćwiczenia\",\"inthissection\":\"w tej sekcji przed kontynuowaniem\",\"code\":\"Kod\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\",\"blank\":\"luka\",\"blank_plural\":\"luk(i)\",\"exercisecontainsblank\":\"To ćwiczenie zawiera {{count}} $t(text.blank).\",\"pleasereplaceblank\":\"Proszę uzupełnić {{blank}} prawidłowym kodem.\",\"unparsable\":\"Wygląda na to, że może to nie być prawidłowy kod R. R nie jest w stanie przetworzyć Twojego tekstu na polecenie. Mogłeś(-aś) zapomnieć wypełnić luki, usunąć podkreślnik, umieścić przecinka między argumentami, lub zamknąć znak <code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code> lub <code>{<\\/code> odpowiadającym <code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code> lub <code>}<\\/code>.\\n\",\"unparsablequotes\":\"<p>Wygląda na to, że Twój kod zawiera szczególnie sformatowane cudzysłowy lub cudzysłowy typograficzne (<code>{{character}}<\\/code>) przy ciągach znaków, co sprawia, że kod jest niepoprawny. R wymaga cudzysłowów prostych (<code>&quot;<\\/code> albo <code>'<\\/code>).<\\/p> {{code}} <p>Nie martw się, to powszechne źródło błędów, gdy kopiuje się kod z innego programu, który sam formatuje teskt. Możesz spróbować zastąpić swój kod następującym kodem. Mogą być też inne miejsca, które wymagają poprawienia.<\\/p> {{suggestion}}\\n\",\"unparsableunicode\":\"<p>Wygląda na to, że Twój kod zawiera niespodziewany znak specjalny (<code>{{character}}<\\/code>), co sprawia, że kod jest niepoprawny.<\\/p> {{code}} <p>Czasami Twój kod może zawierać znak specjalny, który wygląda jak zwykły znak, zwłaszcza jeśli kopiujesz kod z innego programu. Spróbuj usunąć znak specjalny i wpisać do ponownie ręcznie.<\\/p>\\n\",\"unparsableunicodesuggestion\":\"<p>Wygląda na to, że Twój kod zawiera niespodziewany znak specjalny (<code>{{character}}<\\/code>), co sprawia, że kod jest niepoprawny.<\\/p> {{code}} <p>Czasami Twój kod może zawierać znak specjalny, który wygląda jak zwykły znak, zwłaszcza jeśli kopiujesz kod z innego programu. Możesz spróbować zastąpić swój kod następującym kodem. Mogą być też inne miejsca, które wymagają poprawienia.<\\/p> {{suggestion}}\\n\",\"and\":\"i\",\"or\":\"lub\",\"listcomma\":\", \",\"oxfordcomma\":\"\"}}}}}<\/script>"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-format"]},{"type":"character","attributes":{},"value":["0.11.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmarkdown/templates/tutorial/resources"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-format.js"]},{"type":"character","attributes":{},"value":["tutorial-format.css","rstudio-theme.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["navigation"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/navigation-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tabsets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.27"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["default.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.27"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["6.4.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.min.css","css/v4-shims.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fontawesome"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootbox"]},{"type":"character","attributes":{},"value":["5.5.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/bootbox"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["bootbox.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["idb-keyvalue"]},{"type":"character","attributes":{},"value":["3.2.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/idb-keyval"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["idb-keyval-iife-compat.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.11.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65]}},"value":[{"type":"character","attributes":{},"value":["backports","base","bslib","cachem","checkmate","cli","colorspace","commonmark","compiler","datasets","digest","dplyr","ellipsis","evaluate","fansi","farver","fastmap","fontawesome","generics","ggplot2","glue","graphics","grDevices","grid","gtable","highr","htmltools","htmlwidgets","httpuv","jquerylib","jsonlite","knitr","labeling","later","learnr","lifecycle","magrittr","markdown","methods","mime","munsell","pillar","pkgconfig","promises","R6","RColorBrewer","Rcpp","rlang","rmarkdown","rprojroot","rstudioapi","sass","scales","shiny","stats","tibble","tidyselect","tools","utf8","utils","vctrs","withr","xfun","xtable","yaml"]},{"type":"character","attributes":{},"value":["1.5.0","4.4.0","0.7.0","1.1.0","2.3.1","3.6.3","2.1-0","1.9.1","4.4.0","4.4.0","0.6.36","1.1.4","0.3.2","0.24.0","1.0.6","2.1.2","1.2.0","0.5.2","0.1.3","3.5.1","1.7.0","4.4.0","4.4.0","4.4.0","0.3.5","0.11","0.5.8.1","1.6.4","1.6.15","0.1.4","1.8.8","1.47","0.4.3","1.3.2","0.11.5","1.0.4","2.0.3","1.13","4.4.0","0.12","0.5.1","1.9.0","2.0.3","1.3.0","2.5.1","1.1-3","1.0.13","1.1.4","2.27","2.0.4","0.16.0","0.4.9","1.3.0","1.8.1.1","4.4.0","3.2.1","1.2.1","4.4.0","1.2.4","4.4.0","0.6.5","3.0.1","0.45","1.8-4","2.3.9"]}]}]}
</script>
<!--/html_preserve-->
</div>
</div>

</article> <!-- topics -->

<div class="topicsContainer">
<div class="topicsPositioner">
<div class="band">
<div class="bandContent topicsListContainer">

<!-- begin doc-metadata -->
<div id="doc-metadata">
<h1 class="title toc-ignore" style="display:none;">Activity 1: Sampling
from a population</h1>
</div>
<!-- end doc-metadata -->

</div> <!-- bandContent.topicsListContainer -->
</div> <!-- band -->
</div> <!-- topicsPositioner -->
</div> <!-- topicsContainer -->


</main> <!-- bandContent page -->
</div> <!-- pageContent band -->



<!-- Build Tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<script>
// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>


</body>

</html>
